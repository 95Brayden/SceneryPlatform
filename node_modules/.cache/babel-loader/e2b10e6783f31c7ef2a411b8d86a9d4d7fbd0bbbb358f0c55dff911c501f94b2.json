{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport $ from 'jquery';\nimport 'ol/ol.css';\nimport Map from 'ol/Map.js';\nimport View from 'ol/View.js';\nimport GeoJSON from 'ol/format/GeoJSON.js';\nimport { Cluster, Vector as VectorSource } from 'ol/source';\nimport { Heatmap as HeatmapLayer, Vector as VectorLayer } from \"ol/layer\";\nimport { format } from 'ol/coordinate';\nimport { Style, Stroke, Fill, Circle as CircleStyle, Text, Icon } from \"ol/style\";\nimport MousePosition from \"ol/control/MousePosition.js\";\nimport { ScaleLine } from 'ol/control.js';\nimport Measure from \"@/js/measure\"; // 空间测量\n\nimport mapcommon from '@/js/mapcommon';\nimport basemap_menu from '@/components/topmenu/basemap_menu.vue';\nimport range_menu from '@/components/topmenu/range_menu.vue';\nimport type_menu from '@/components/topmenu/type_menu.vue';\nimport count_menu from '@/components/topmenu/count_menu.vue';\nimport AddSite from '@/components/topmenu/add_site.vue'; // 导入 add_site.vue 组件\nimport { Feature } from \"ol\";\nimport { Point } from \"ol/geom\";\nexport default {\n  name: 'home',\n  components: {\n    basemap_menu,\n    range_menu,\n    type_menu,\n    count_menu,\n    AddSite\n  },\n  data() {\n    return {\n      map: null,\n      //地图对象\n      cur_basemap_select: null,\n      //当前选择的底图图层\n      cur_basemap_type: \"esri_worldimagery\",\n      //当前选择的底图图层名称\n      rangeLayer: null,\n      //边界图层\n      select_sta_type: \"all\",\n      //当前选择的显示景点类型\n      stationinfo_data_list: null,\n      //景点数据列表\n      cur_top_menu_select: null,\n      //当前顶部选择的菜单\n      staVectorSource: null,\n      //景点图标数组\n      staVectorLayer: null,\n      //景点图标图层\n      cur_select_range_type: \"all\",\n      select_mesure_type: null,\n      //当前选择的测量类型\n      siteUrl: \"http://www.cnhhl.com/index.php?m=History&a=index&id=71\",\n      // 添加一个变量来保存官方网址\n      showAddSite: false,\n      //是否显示添加站点框\n\n      //从event新增的data\n      select_theme_type: null,\n      //当前选择的专题图层\n      real_strong_data_list: null,\n      //景点实时观测数据列表\n      real_strong_data_dict: {},\n      //各景点的最新强震动参数Hash数组\n      imageLayer: null,\n      //图片图层\n      option_heatmap: {\n        blur: 43,\n        radius: 30\n      },\n      heatMapLayer: {},\n      //热力图层\n      heatData: {\n        type: \"FeatureCollection\",\n        features: [\n          /**\r\n           {\r\n           type: \"Feature\",\r\n           geometry: { type: \"Point\", coordinates: [112.4, 31.19] },\r\n           properties: { weight: 0.9 }\r\n           }\r\n           */\n        ]\n      },\n      clusterLayer: null,\n      //聚合图层对象\n      draw: null\n    };\n  },\n  methods: {\n    toggleAddSiteForm() {\n      // 切换 showAddSite 变量的状态来控制显示或隐藏 add_site.vue 组件\n      this.showAddSite = !this.showAddSite;\n      console.log(this.showAddSite); // 检查 showAddSite 的值\n    },\n\n    initMap() {\n      //初始化地图\n      this.map = new Map({\n        target: 'ol_map',\n        layers: [],\n        view: new View({\n          projection: \"EPSG:4326\",\n          center: [114.365248, 30.53786],\n          zoom: 10\n        })\n      });\n      this.cur_basemap_select = mapcommon.getBaseMapLayerGroup(this.cur_basemap_type);\n      this.map.addLayer(this.cur_basemap_select);\n\n      //鼠标获取坐标控件\n      const mousePositionControl = new MousePosition({\n        coordinateFormat: function (coordinate) {\n          return format(coordinate, '经纬度:{x},{y}', 4);\n        },\n        projection: 'EPSG:4326',\n        className: 'custom-mouse-position',\n        target: document.getElementById('div_xy'),\n        undefinedHTML: ' '\n      });\n      this.map.addControl(mousePositionControl);\n\n      //实例化比例尺控件（ScaleLine）\n      var scaleLineControl = new ScaleLine({\n        //设置比例尺单位，degrees、imperial、us、nautical、metric（度量单位）\n        units: \"metric\"\n      });\n      this.map.addControl(scaleLineControl);\n    },\n    changeBaseMap(type) {\n      //更改底图图层\n      console.log(type);\n      if (type != \"\") {\n        this.cur_basemap_type = type;\n      }\n      if (this.cur_basemap_select != null) {\n        this.map.removeLayer(this.cur_basemap_select);\n      }\n      this.cur_basemap_select = mapcommon.getBaseMapLayerGroup(this.cur_basemap_type);\n      this.map.addLayer(this.cur_basemap_select);\n      this.addForestry(this.cur_select_range_type);\n    },\n    addForestry(type) {\n      //添加边界\n      if (type != \"\") {\n        this.cur_select_range_type = type;\n      }\n      var m_url = \"/static/data/map/region.json?t=\" + new Date().getTime();\n      var m_weight = 3;\n      if (this.cur_select_range_type == 'city') {\n        m_url = \"/static/data/map/city.json?t=\" + new Date().getTime();\n        m_weight = 3;\n      } else if (this.cur_select_range_type == 'country') {\n        m_url = \"/static/data/map/region.json?t=\" + new Date().getTime();\n        m_weight = 2;\n      } else {\n        m_url = \"/static/data/map/province.json?t=\" + new Date().getTime();\n        m_weight = 1;\n      }\n      if (this.rangeLayer != null || this.rangeLayer == \"undefined\") {\n        //移除已有矢量图层\n        this.map.removeLayer(this.rangeLayer);\n      }\n      var vectorSource = new VectorSource({\n        url: m_url,\n        format: new GeoJSON()\n      });\n      this.rangeLayer = new VectorLayer({\n        //矢量数据源\n        source: vectorSource,\n        //样式设置\n        style: mapcommon.styleFunction\n      });\n\n      //将矢量图层加载到地图中\n      this.map.addLayer(this.rangeLayer);\n      this.rendStationInfoData(this.select_sta_type);\n    },\n    changeOneMarkerStatus(id, name, statusSign) {\n      var feature = this.staVectorSource.getFeatureById(id);\n      var img_url = '/static/images/marker/marker.png';\n      var fiil_color = '#008eff';\n      if (statusSign == 1) {\n        img_url = '/static/images/marker/marker_s.png';\n        fiil_color = 'red';\n      } else {\n        img_url = '/static/images/marker/marker.png';\n        fiil_color = '#008eff';\n      }\n      feature.setStyle(new Style({\n        image: new Icon({\n          anchor: [0.5, 40],\n          anchorOrigin: 'top-left',\n          anchorXUnits: 'fraction',\n          anchorYUnits: 'pixels',\n          offsetOrigin: 'top-right',\n          // offset:[0,10],\n          //图标缩放比例\n          // scale:0.5,\n          //透明度\n          opacity: 1,\n          //图标的url\n          src: img_url\n        }),\n        text: new Text({\n          //位置\n          textAlign: 'center',\n          //基准线\n          textBaseline: 'middle',\n          //文字样式\n          font: 'normal 14px 微软雅黑',\n          //文本内容\n          text: name,\n          //文本填充样式（即文字颜色）\n          fill: new Fill({\n            color: fiil_color\n          }),\n          offsetY: 12,\n          scale: 1,\n          stroke: new Stroke({\n            color: '#ffcc33',\n            width: 2\n          })\n        })\n      }));\n    },\n    selectStation(select_sta_id) {\n      //选中某个景点\n      for (var i = 0; i < this.stationinfo_data_list.length; i++) {\n        var m = this.stationinfo_data_list[i];\n        var sta_id = m.net_code + \".\" + m.sta_code;\n        var name = m.sta_name;\n        var statusSign = 0;\n        if (select_sta_id == sta_id) {\n          statusSign = 1;\n          $('#sta_name').text(m.sta_name);\n          $('#sta_type').text(m.sta_type);\n          $('#site_level').text(m.site_level);\n          $('#site_range').text(m.site_range);\n          $('#site_adress').text(m.site_adress);\n          $('#net_code').text(m.net_code);\n          $('#sta_code').text(m.sta_code);\n          $('#loc').text(m.sta_lon + ',' + m.sta_lat);\n          $('#site_pic').html('<img src=\"/static/images/show/' + m.site_pic + '\" width=\"100%\" height=\"240\"/>');\n          $('#site_introduce').html(\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\" + m.site_instroduce);\n          // 如果景点信息中包含官方网址，则将它保存到按钮的 data-url 属性中\n          // 获取景点官方网址\n          var siteUrl = m.site_url;\n\n          // 如果存在官方网址，则保存到组件的数据属性中\n          if (siteUrl) {\n            this.siteUrl = siteUrl;\n          } else {\n            // 如果不存在官方网址，则置为null，按钮将不显示\n            this.siteUrl = null;\n          }\n          $(\"#m_site_info\").show();\n        }\n        this.changeOneMarkerStatus(sta_id, name, statusSign);\n      }\n    },\n    goToSite() {\n      // 获取当前选定景点的官方网站链接\n      var siteUrl = this.siteUrl;\n\n      // 如果链接存在，则进行跳转\n      if (siteUrl) {\n        window.open(siteUrl, '_blank');\n      } else {\n        alert('未找到景点官方网站链接！');\n      }\n    },\n    rendStationInfoData(type) {\n      //显示景点\n      this.select_sta_type = type;\n      if (this.staVectorLayer != null) {\n        this.map.removeLayer(this.staVectorLayer);\n      }\n      this.staVectorSource = new VectorSource({\n        features: []\n      });\n      this.staVectorLayer = new VectorLayer({\n        source: this.staVectorSource\n      });\n      this.map.addLayer(this.staVectorLayer);\n      if (this.stationinfo_data_list == null) {\n        return;\n      }\n      for (var i = 0; i < this.stationinfo_data_list.length; i++) {\n        var m = this.stationinfo_data_list[i];\n        console.log(m);\n        var filerSign = mapcommon.is_show_station(m, this.select_sta_type);\n        if (filerSign) {\n          continue;\n        }\n        var sta01 = mapcommon.buildStationImageMarker(m);\n        this.staVectorSource.addFeature(sta01);\n      }\n\n      //为地图容器添加单击事件监听\n      let that = this;\n      that.map.on('click', function (event) {\n        let feature = that.map.forEachFeatureAtPixel(event.pixel, function (feature, layer) {\n          return feature;\n        });\n        if (feature) {\n          console.log(feature.getId());\n          that.selectStation(feature.getId());\n        }\n      });\n    },\n    rendStationInfoData11(type) {\n      //显示各景点的强震动参数\n      this.select_sta_type = type;\n      if (this.staVectorLayer != null) {\n        this.map.removeLayer(this.staVectorLayer);\n      }\n      this.staVectorSource = new VectorSource({\n        features: []\n      });\n      this.staVectorLayer = new VectorLayer({\n        source: this.staVectorSource\n      });\n      this.map.addLayer(this.staVectorLayer);\n      if (this.real_strong_data_list == null) {\n        return;\n      }\n      var curIndex = 1;\n      for (var i = 0; i < this.real_strong_data_list.length; i++) {\n        var m = this.real_strong_data_list[i];\n        console.log(m);\n        var filerSign = mapcommon.is_show_station(m, this.select_sta_type);\n        if (filerSign) {\n          continue;\n        }\n        var sta01 = mapcommon.buildStationDivMarker(m);\n        //console.log(sta01);\n        this.staVectorSource.addFeature(sta01);\n        curIndex += 1;\n      }\n      //为地图容器添加单击事件监听\n      let that = this;\n      that.map.on('click', function (event) {\n        let feature = that.map.forEachFeatureAtPixel(event.pixel, function (feature, layer) {\n          return feature;\n        });\n        if (feature) {\n          console.log(feature.getId());\n          that.selectStation(feature.getId());\n        }\n      });\n    },\n    clusterStyle() {\n      //聚合标注样式\n      return (feature, solution) => {\n        var total = 0;\n        feature.get(\"features\").forEach((value, index) => {\n          total += value.get(\"value\");\n        });\n        var style = new Style({\n          image: new CircleStyle({\n            radius: 15,\n            stroke: new Stroke({\n              color: \"blue\"\n            }),\n            fill: new Fill({\n              color: \"rgba(24,144,255,100)\"\n            })\n          }),\n          text: new Text({\n            text: total.toString(),\n            fill: new Fill({\n              color: \"#FFF\"\n            }),\n            font: \"12px Calibri,sans-serif\",\n            stroke: new Stroke({\n              color: \"red\",\n              width: 5\n            })\n          })\n        });\n        return style;\n      };\n    },\n    initCluster(visiable) {\n      //添加聚合图层\n\n      if (visiable) {\n        if (this.staVectorLayer != null) {\n          this.map.removeLayer(this.staVectorLayer);\n        }\n        if (this.clusterLayer != null) {\n          this.map.removeLayer(this.clusterLayer);\n        }\n        let source = new VectorSource();\n        let clusterSource = new Cluster({\n          distance: parseInt(20, 10),\n          source: source\n        });\n        this.clusterLayer = new VectorLayer({\n          source: clusterSource,\n          style: this.clusterStyle.call(this)\n        });\n        this.map.addLayer(this.clusterLayer);\n        for (var i = 0; i < this.stationinfo_data_list.length; i++) {\n          var m = this.stationinfo_data_list[i];\n          var latLon = [parseFloat(m.sta_lon), parseFloat(m.sta_lat)];\n          var f = new Feature({\n            geometry: new Point(latLon)\n          });\n          f.set(\"name\", m.sta_code);\n          f.set(\"value\", 1);\n          source.addFeature(f);\n        }\n      } else {\n        if (this.clusterLayer != null) {\n          this.map.removeLayer(this.clusterLayer);\n          this.rendStationInfoData(this.select_sta_type);\n        }\n      }\n    },\n    //热力图\n    initHeatMapLayer(visiable) {\n      //显示热力图\n      if (visiable) {\n        if (this.heatData.features.length == 0) for (var i = 0; i < this.stationinfo_data_list.length; i++) {\n          var m = this.stationinfo_data_list[i];\n          var latLon = [parseFloat(m.sta_lon), parseFloat(m.sta_lat)];\n          var data = {\n            type: \"Feature\",\n            geometry: {\n              type: \"Point\",\n              coordinates: latLon\n            },\n            properties: {\n              weight: 1\n            }\n          };\n          this.heatData.features.push(data);\n        }\n        if (this.heatMapLayer != null) {\n          this.map.removeLayer(this.heatMapLayer);\n        }\n        this.heatMapLayer = new HeatmapLayer({\n          source: new VectorSource({\n            features: new GeoJSON().readFeatures(this.heatData)\n          }),\n          blur: this.option_heatmap.blur,\n          radius: this.option_heatmap.radius,\n          weight: e => {\n            return e.values_.weight; //根据权重展示热力图！关键点，weight范围为：0-1！！！\n          }\n        });\n\n        this.map.addLayer(this.heatMapLayer);\n        this.rendStationInfoData11(this.select_sta_type);\n      } else {\n        if (this.heatMapLayer != null) {\n          this.map.removeLayer(this.heatMapLayer);\n          this.rendStationInfoData11(this.select_sta_type);\n        }\n      }\n    },\n    initLeftMenu() {\n      //初始化左侧菜单\n      let that = this;\n      $(document).on('click', '.left_menu_bar div', function (event) {\n        var event_type = event.type;\n        var type = $(this).attr('type');\n        var action = $(this).attr('action');\n        if (type == 'bt') {\n          if (action == 'zoom_in') {\n            var view = that.map.getView();\n            var zoom = view.getZoom();\n            view.setZoom(zoom + 1);\n          } else {\n            var view = that.map.getView();\n            var zoom = view.getZoom();\n            view.setZoom(zoom - 1);\n          }\n        } else if (type == 'add') {\n          $(\"#m_select_range\").hide();\n          $(\"#m_countinfo\").hide();\n          $(\"#m_selectmarker\").hide();\n          $(\"#m_baselayer\").hide();\n          $(\"#m_addsite\").show();\n        } else if (type == 'mesure') {\n          if (that.select_mesure_type == null || that.select_mesure_type != action) {\n            that.select_mesure_type = action;\n            $(\".left_menu_bar\").find(\"div\").attr(\"class\", \"left_bt_item\");\n            $(this).attr('class', 'left_bt_item_s');\n            if (action == 'mesure_line') {\n              that.measureFun('LineString');\n            } else if (action == 'mesure_area') {\n              that.measureFun('Polygon');\n            }\n          } else {\n            that.select_mesure_type = null;\n            $(\".left_menu_bar\").find(\"div\").attr(\"class\", \"left_bt_item\");\n            if (action == 'mesure_line') {} else if (action == 'mesure_area') {}\n          }\n        } else if (type == 'theme') {\n          if (that.select_theme_type == null || that.select_theme_type != action) {\n            that.select_theme_type = action;\n\n            // $(\".right_menu_bar\").find(\"div\").attr(\"class\", \"right_bt_item\");\n            // $(this).attr('class', 'right_bt_item_s');\n            /*此处有修改！！！！！！！！！！！！！！！！！！！！！！！111*/\n            $(\".left_menu_bar\").find(\"div\").attr(\"class\", \"left_bt_item\");\n            $(this).attr('class', 'left_bt_item_s');\n            if (action == 'image_layer') {} else if (action == 'heat_layer') {\n              that.initHeatMapLayer(true);\n            } else if (action == 'cluster_layer') {\n              that.initCluster(true);\n            }\n          } else {\n            that.select_theme_type = null;\n            $(\".right_menu_bar\").find(\"div\").attr(\"class\", \"right_bt_item\");\n            if (action == 'image_layer') {\n              that.initImageLayer(false);\n            } else if (action == 'heat_layer') {\n              that.initHeatMapLayer(false);\n            } else if (action == 'cluster_layer') {\n              that.initCluster(false);\n            }\n          }\n        }\n      });\n    },\n    initTopMenu() {\n      //初始化顶部菜单\n      let that = this;\n      $(document).on('click', '.top-menu-bar div', function (event) {\n        var event_type = event.type;\n        var type = $(this).attr('type');\n        that.cur_top_menu_select = type;\n        $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\n        $(this).attr('class', 'menu-bt-bg-s');\n        if (type == 'baselayer') {\n          $(\"#m_select_range\").hide();\n          $(\"#m_countinfo\").hide();\n          $(\"#m_selectmarker\").hide();\n          $(\"#m_addsite\").hide();\n          $(\"#m_baselayer\").show();\n        } else if (type == 'countinfo') {\n          $(\"#m_select_range\").hide();\n          $(\"#m_baselayer\").hide();\n          $(\"#m_selectmarker\").hide();\n          $(\"#m_addsite\").hide();\n          $(\"#m_countinfo\").show();\n        } else if (type == 'marker') {\n          $(\"#m_select_range\").hide();\n          $(\"#m_countinfo\").hide();\n          $(\"#m_baselayer\").hide();\n          $(\"#m_addsite\").hide();\n          $(\"#m_selectmarker\").show();\n        } else if (type == 'rangelayer') {\n          $(\"#m_select_range\").show();\n          $(\"#m_countinfo\").hide();\n          $(\"#m_baselayer\").hide();\n          $(\"#m_selectmarker\").hide();\n          $(\"#m_addsite\").hide();\n        }\n      });\n\n      //底图图层弹出窗口的关闭事件\n      $(document).on(\"click\", \"#m_baselayer_close\", function (event) {\n        event.preventDefault();\n        $(\"#m_baselayer\").hide();\n        $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\n      });\n\n      //选择边界图层弹出窗口的关闭事件\n      $(document).on(\"click\", \"#m_select_range_close\", function (event) {\n        event.preventDefault();\n        $(\"#m_select_range\").hide();\n        $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\n      });\n\n      //选择标注图层弹出窗口的关闭事件\n      $(document).on(\"click\", \"#m_selectmarker_close\", function (event) {\n        event.preventDefault();\n        $(\"#m_selectmarker\").hide();\n        $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\n      });\n\n      //统计信息图层弹出窗口的关闭事件\n      $(document).on(\"click\", \"#m_countinfo_close\", function (event) {\n        event.preventDefault();\n        $(\"#m_countinfo\").hide();\n        $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\n      });\n\n      //站点信息图层弹出窗口的关闭事件\n      $(document).on(\"click\", \"#m_site_info_close\", function (event) {\n        event.preventDefault();\n        $(\"#m_site_info\").hide();\n        $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\n      });\n    },\n    initShowWindow() {\n      //初始化弹出窗的功能\n      let that = this;\n      $(document).on(\"click\", \".baselayer_select .menu_con\", function (event) {\n        event.preventDefault();\n        var type = $(this).attr(\"id\");\n        $('.baselayer_select .menu_con').attr('class', 'menu_con');\n        $(this).attr(\"class\", \"menu_con menu_con_select\");\n        that.changeBaseMap(type);\n      });\n      $(document).on(\"click\", \".select_range_type .show_windows_select_content\", function (event) {\n        event.preventDefault();\n        var type = $(this).attr(\"id\");\n        $('.select_range_type .show_windows_select_content').attr('class', 'show_windows_select_content');\n        $(this).attr(\"class\", \"show_windows_select_content menu_con_select\");\n        that.addForestry(type);\n      });\n      $(document).on(\"click\", \".select_marker_type .show_windows_select_content\", function (event) {\n        event.preventDefault();\n        var type = $(this).attr(\"id\");\n        console.log(type);\n        $('.select_marker_type .show_windows_select_content').attr('class', 'show_windows_select_content');\n        $(this).attr(\"class\", \"show_windows_select_content menu_con_select\");\n        that.rendStationInfoData(type);\n      });\n    },\n    initData() {\n      //初始化数据\n      let that = this;\n      $.ajax({\n        type: \"get\",\n        url: \"/static/data/stationinfo.json?time=\" + new Date().getTime(),\n        dataType: \"json\",\n        error: function () {\n          alert(\"获取数据失败！\");\n        },\n        success: function (resp) {\n          that.stationinfo_data_list = resp.data;\n          console.log(that.stationinfo_data_list);\n          that.select_sta_type = \"all\";\n          if (that.staVectorLayer != null) {\n            that.map.removeLayer(that.staVectorLayer);\n          }\n          that.staVectorSource = new VectorSource({\n            features: []\n          });\n          that.staVectorLayer = new VectorLayer({\n            source: that.staVectorSource\n          });\n          that.map.addLayer(that.staVectorLayer);\n          var curIndex = 1;\n          for (var i = 0; i < that.stationinfo_data_list.length; i++) {\n            var m = that.stationinfo_data_list[i];\n            var filerSign = mapcommon.is_show_station(m, that.select_sta_type);\n            if (filerSign) {\n              continue;\n            }\n            var sta01 = mapcommon.buildStationImageMarker(m);\n            that.staVectorSource.addFeature(sta01);\n            curIndex += 1;\n          }\n        }\n      });\n    },\n    measureFun(option) {\n      // 空间测量\n      switch (option) {\n        case 'Point':\n          Measure.measure(this.map, 'Point');\n          break;\n        case 'LineString':\n          Measure.measure(this.map, 'LineString');\n          break;\n        case 'Polygon':\n          Measure.measure(this.map, 'Polygon');\n          break;\n      }\n    }\n  },\n  mounted() {\n    this.initData();\n    this.initMap();\n    this.initTopMenu();\n    this.initLeftMenu();\n    this.initShowWindow();\n    this.addForestry(\"city\");\n  }\n};","map":{"version":3,"names":["$","Map","View","GeoJSON","Cluster","Vector","VectorSource","Heatmap","HeatmapLayer","VectorLayer","format","Style","Stroke","Fill","Circle","CircleStyle","Text","Icon","MousePosition","ScaleLine","Measure","mapcommon","basemap_menu","range_menu","type_menu","count_menu","AddSite","Feature","Point","name","components","data","map","cur_basemap_select","cur_basemap_type","rangeLayer","select_sta_type","stationinfo_data_list","cur_top_menu_select","staVectorSource","staVectorLayer","cur_select_range_type","select_mesure_type","siteUrl","showAddSite","select_theme_type","real_strong_data_list","real_strong_data_dict","imageLayer","option_heatmap","blur","radius","heatMapLayer","heatData","type","features","clusterLayer","draw","methods","toggleAddSiteForm","console","log","initMap","target","layers","view","projection","center","zoom","getBaseMapLayerGroup","addLayer","mousePositionControl","coordinateFormat","coordinate","className","document","getElementById","undefinedHTML","addControl","scaleLineControl","units","changeBaseMap","removeLayer","addForestry","m_url","Date","getTime","m_weight","vectorSource","url","source","style","styleFunction","rendStationInfoData","changeOneMarkerStatus","id","statusSign","feature","getFeatureById","img_url","fiil_color","setStyle","image","anchor","anchorOrigin","anchorXUnits","anchorYUnits","offsetOrigin","opacity","src","text","textAlign","textBaseline","font","fill","color","offsetY","scale","stroke","width","selectStation","select_sta_id","i","length","m","sta_id","net_code","sta_code","sta_name","sta_type","site_level","site_range","site_adress","sta_lon","sta_lat","html","site_pic","site_instroduce","site_url","show","goToSite","window","open","alert","filerSign","is_show_station","sta01","buildStationImageMarker","addFeature","that","on","event","forEachFeatureAtPixel","pixel","layer","getId","rendStationInfoData11","curIndex","buildStationDivMarker","clusterStyle","solution","total","get","forEach","value","index","toString","initCluster","visiable","clusterSource","distance","parseInt","call","latLon","parseFloat","f","geometry","set","initHeatMapLayer","coordinates","properties","weight","push","readFeatures","e","values_","initLeftMenu","event_type","attr","action","getView","getZoom","setZoom","hide","find","measureFun","initImageLayer","initTopMenu","preventDefault","initShowWindow","initData","ajax","dataType","error","success","resp","option","measure","mounted"],"sources":["E:\\Desktop\\scenerymonitor\\src\\views\\home.vue"],"sourcesContent":["<template>\r\n    <div class=\"ol_map\" id=\"ol_map\"></div>\r\n    <div class=\"left_menu_bar\">\r\n        <div class=\"left_bt_item\" type=\"bt\" action=\"zoom_in\">地图放大</div>\r\n        <div class=\"left_bt_item\" type=\"bt\" action=\"zoom_out\">地图缩小</div>\r\n        <div class=\"left_bt_item\" type=\"add\" @click=\"toggleAddSiteForm\">添加站点</div>\r\n        <div class=\"left_bt_item\" type=\"mesure\" action=\"mesure_line\">测量距离</div>\r\n        <div class=\"left_bt_item\" type=\"mesure\" action=\"mesure_area\">测量面积</div>\r\n        <div class=\"left_bt_item\" type=\"theme\" action=\"cluster_layer\">聚合图层</div>\r\n        <div class=\"left_bt_item\" type=\"theme\" action=\"heat_layer\">热力图层</div>\r\n    </div>\r\n\r\n    <div id=\"div_xy\"></div>\r\n    <div class=\"top-menu-bar d-flex j-center a-center\">\r\n        <div class=\"menu-bt-bg\" type=\"baselayer\"><img src=\"@/assets/images/topmenu/top_baselayer.png\" width=\"40\"\r\n                height=\"40\" /></div>\r\n        <div class=\"menu-bt-bg\" type=\"rangelayer\"><img src=\"@/assets/images/topmenu/top_range.png\" width=\"40\" height=\"40\" />\r\n        </div>\r\n        <div class=\"menu-bt-bg\" type=\"marker\"><img src=\"@/assets/images/topmenu/top_marker.png\" width=\"40\" height=\"40\" />\r\n        </div>\r\n        <div class=\"menu-bt-bg\" type=\"countinfo\"><img src=\"@/assets/images/topmenu/top_count.png\" width=\"40\" height=\"40\" />\r\n        </div>\r\n    </div>\r\n\r\n    <basemap_menu></basemap_menu>\r\n    <range_menu></range_menu>\r\n    <type_menu></type_menu>\r\n    <count_menu></count_menu>\r\n    <add-site></add-site>\r\n\r\n    <!--景点基本信息弹出框-->\r\n    <div class=\"show_windows_900\" id=\"m_site_info\" style=\"display: block; height: 850px;\">\r\n        <a style=\"float: right\"><i class=\"show_windows_title_close\" id=\"m_site_info_close\"></i></a>\r\n        <div class=\"show_windows_title\">\r\n            <p>基本信息</p>\r\n        </div>\r\n        <div class=\"show_windows_content_padding\">\r\n            <table class=\"table_default\">\r\n                <tr class=\"tr_title\">\r\n                    <td>景点名称</td>\r\n                    <td>景点类型</td>\r\n                    <td>景点级别</td>\r\n                </tr>\r\n                <tr class=\"tr_content\">\r\n                    <td>\r\n                        <p id=\"sta_name\">黄鹤楼</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"sta_type\">文化保护单位</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"site_level\">全国重点</p>\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"tr_title\">\r\n                    <td>所属区域</td>\r\n                    <td colspan=\"2\">景点地址</td>\r\n                </tr>\r\n                <tr class=\"tr_content\">\r\n                    <td>\r\n                        <p id=\"site_range\">武昌区</p>\r\n                    </td>\r\n                    <td colspan=\"2\">\r\n                        <p id=\"site_adress\">湖北省武汉市武昌区蛇山西山坡1号</p>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n        <div class=\"show_windows_title margin-top-5\">\r\n            <p>景点信息</p>\r\n        </div>\r\n        <div class=\"show_windows_content_padding\">\r\n            <table class=\"table_default\">\r\n                <tr class=\"tr_title\">\r\n                    <td>区域代码</td>\r\n                    <td>景点代码</td>\r\n                    <td>景点位置</td>\r\n                </tr>\r\n                <tr class=\"tr_content\">\r\n                    <td>\r\n                        <p id=\"net_code\">WL</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"sta_code\">WLL06</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"loc\">114.306439,30.544481</p>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n        <div class=\"show_windows_title margin-top-5\">\r\n            <p>景区简介</p>\r\n        </div>\r\n        <div class=\"show_windows_content_padding\">\r\n            <div class=\"show_windows_content_pic\" id=\"site_pic\">\r\n                <img src=\"/static/images/show/00009.jpg\" width=\"100%\">\r\n            </div>\r\n            <div class=\"show_windows_content_introduce\" id=\"site_introduce\">\r\n                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;黄鹤楼位于湖北省武汉市武昌区蛇山西山坡，是国家5A级旅游景区，为中国古代四大名楼之一。楼高五层，主体建筑高度达到51.4米，是集古代建筑艺术与长江美景于一体的旅游胜地。\r\n            </div>\r\n        </div>\r\n      <div class=\"show_windows_title margin-top-5\">\r\n        <p>景点详情</p>\r\n      </div>\r\n      <div class=\"show_windows_content_padding\" id=\"site_url\">\r\n        <button v-if=\"siteUrl\" class=\"left_bt_item\" @click=\"goToSite\">点击查看景区详情</button>\r\n        <p v-else   class=\"show_windows_content_introduce\"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;暂无官方网址</p>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from 'jquery';\r\nimport 'ol/ol.css';\r\nimport Map from 'ol/Map.js';\r\nimport View from 'ol/View.js';\r\nimport GeoJSON from 'ol/format/GeoJSON.js';\r\nimport {Cluster, Vector as VectorSource} from 'ol/source';\r\nimport {Heatmap as HeatmapLayer, Vector as VectorLayer} from \"ol/layer\";\r\nimport { format } from 'ol/coordinate';\r\nimport { Style, Stroke, Fill, Circle as CircleStyle, Text, Icon } from \"ol/style\";\r\nimport MousePosition from \"ol/control/MousePosition.js\";\r\nimport {ScaleLine} from 'ol/control.js';\r\nimport Measure from \"@/js/measure\" // 空间测量\r\n\r\nimport mapcommon from '@/js/mapcommon';\r\nimport basemap_menu from '@/components/topmenu/basemap_menu.vue';\r\nimport range_menu from '@/components/topmenu/range_menu.vue';\r\nimport type_menu from '@/components/topmenu/type_menu.vue';\r\nimport count_menu from '@/components/topmenu/count_menu.vue';\r\nimport AddSite from '@/components/topmenu/add_site.vue'; // 导入 add_site.vue 组件\r\nimport {Feature} from \"ol\";\r\nimport {Point} from \"ol/geom\";\r\n\r\nexport default {\r\n    name: 'home',\r\n    components: {\r\n        basemap_menu,\r\n        range_menu,\r\n        type_menu,\r\n        count_menu,\r\n        AddSite\r\n    },\r\n    data() {\r\n        return {\r\n            map: null,  //地图对象\r\n            cur_basemap_select: null, //当前选择的底图图层\r\n            cur_basemap_type: \"esri_worldimagery\", //当前选择的底图图层名称\r\n            rangeLayer: null, //边界图层\r\n            select_sta_type: \"all\", //当前选择的显示景点类型\r\n            stationinfo_data_list: null,  //景点数据列表\r\n            cur_top_menu_select: null,  //当前顶部选择的菜单\r\n            staVectorSource: null,  //景点图标数组\r\n            staVectorLayer: null, //景点图标图层\r\n            cur_select_range_type: \"all\",\r\n            select_mesure_type : null, //当前选择的测量类型\r\n            siteUrl: \"http://www.cnhhl.com/index.php?m=History&a=index&id=71\", // 添加一个变量来保存官方网址\r\n            showAddSite: false,//是否显示添加站点框\r\n\r\n\r\n          //从event新增的data\r\n          select_theme_type: null,  //当前选择的专题图层\r\n          real_strong_data_list: null, //景点实时观测数据列表\r\n          real_strong_data_dict: {}, //各景点的最新强震动参数Hash数组\r\n          imageLayer: null, //图片图层\r\n          option_heatmap: {\r\n            blur: 43,\r\n            radius: 30\r\n          },\r\n          heatMapLayer: {},  //热力图层\r\n          heatData: {\r\n            type: \"FeatureCollection\",\r\n            features: [\r\n              /**\r\n               {\r\n               type: \"Feature\",\r\n               geometry: { type: \"Point\", coordinates: [112.4, 31.19] },\r\n               properties: { weight: 0.9 }\r\n               }\r\n               */\r\n            ]\r\n          },\r\n          clusterLayer: null,  //聚合图层对象\r\n          draw: null,\r\n        }\r\n    },\r\n    methods: {\r\n        toggleAddSiteForm() {\r\n          // 切换 showAddSite 变量的状态来控制显示或隐藏 add_site.vue 组件\r\n          this.showAddSite = !this.showAddSite;\r\n          console.log(this.showAddSite); // 检查 showAddSite 的值\r\n        },\r\n        initMap() {  //初始化地图\r\n            this.map = new Map({\r\n                target: 'ol_map',\r\n                layers: [],\r\n                view: new View({\r\n                    projection: \"EPSG:4326\",\r\n                    center: [114.365248, 30.53786],\r\n                    zoom: 10,\r\n                }),\r\n            });\r\n            this.cur_basemap_select = mapcommon.getBaseMapLayerGroup(this.cur_basemap_type);\r\n            this.map.addLayer(this.cur_basemap_select);\r\n\r\n            //鼠标获取坐标控件\r\n            const mousePositionControl = new MousePosition({\r\n                coordinateFormat: function (coordinate) {\r\n                    return format(coordinate, '经纬度:{x},{y}', 4);\r\n                },\r\n                projection: 'EPSG:4326',\r\n                className: 'custom-mouse-position',\r\n                target: document.getElementById('div_xy'),\r\n                undefinedHTML: ' '\r\n            });\r\n            this.map.addControl(mousePositionControl);\r\n\r\n            //实例化比例尺控件（ScaleLine）\r\n            var scaleLineControl = new ScaleLine({\r\n                //设置比例尺单位，degrees、imperial、us、nautical、metric（度量单位）\r\n                units: \"metric\"\r\n            });\r\n            this.map.addControl(scaleLineControl);\r\n        },\r\n        changeBaseMap(type) { //更改底图图层\r\n            console.log(type);\r\n            if(type != \"\"){\r\n                this.cur_basemap_type = type;\r\n            }\r\n            if (this.cur_basemap_select != null) {\r\n                this.map.removeLayer(this.cur_basemap_select);\r\n            }\r\n            this.cur_basemap_select = mapcommon.getBaseMapLayerGroup(this.cur_basemap_type);\r\n            this.map.addLayer(this.cur_basemap_select);\r\n            this.addForestry(this.cur_select_range_type);\r\n\r\n        },\r\n        addForestry(type) { //添加边界\r\n            if(type != \"\"){\r\n                this.cur_select_range_type = type;\r\n            }\r\n            var m_url = \"/static/data/map/region.json?t=\" + new Date().getTime();\r\n            var m_weight = 3;\r\n            if (this.cur_select_range_type == 'city') {\r\n                m_url = \"/static/data/map/city.json?t=\" + new Date().getTime();\r\n                m_weight = 3;\r\n            } else if (this.cur_select_range_type == 'country') {\r\n                m_url = \"/static/data/map/region.json?t=\" + new Date().getTime();\r\n                m_weight = 2;\r\n            } else {\r\n                m_url = \"/static/data/map/province.json?t=\" + new Date().getTime();\r\n                m_weight = 1;\r\n            }\r\n            if (this.rangeLayer != null || this.rangeLayer == \"undefined\") {\r\n                //移除已有矢量图层\r\n                this.map.removeLayer(this.rangeLayer);\r\n            }\r\n            var vectorSource = new VectorSource({\r\n                url: m_url,\r\n                format: new GeoJSON()\r\n            });\r\n            this.rangeLayer = new VectorLayer({\r\n                //矢量数据源\r\n                source: vectorSource,\r\n                //样式设置\r\n                style: mapcommon.styleFunction\r\n            });\r\n\r\n\r\n            //将矢量图层加载到地图中\r\n            this.map.addLayer(this.rangeLayer);\r\n\r\n            this.rendStationInfoData(this.select_sta_type);\r\n\r\n        },\r\n        changeOneMarkerStatus(id, name, statusSign) {\r\n            var feature = this.staVectorSource.getFeatureById(id);\r\n            var img_url = '/static/images/marker/marker.png';\r\n            var fiil_color = '#008eff';\r\n            if (statusSign == 1) {\r\n                img_url = '/static/images/marker/marker_s.png';\r\n                fiil_color = 'red';\r\n            } else {\r\n                img_url = '/static/images/marker/marker.png';\r\n                fiil_color = '#008eff';\r\n            }\r\n            feature.setStyle(new Style({\r\n                image: new Icon(\r\n                    ({\r\n                        anchor: [0.5, 40],\r\n                        anchorOrigin: 'top-left',\r\n                        anchorXUnits: 'fraction',\r\n                        anchorYUnits: 'pixels',\r\n                        offsetOrigin: 'top-right',\r\n                        // offset:[0,10],\r\n                        //图标缩放比例\r\n                        // scale:0.5,\r\n                        //透明度\r\n                        opacity: 1,\r\n                        //图标的url\r\n                        src: img_url\r\n                    })),\r\n                text: new Text({\r\n                    //位置\r\n                    textAlign: 'center',\r\n                    //基准线\r\n                    textBaseline: 'middle',\r\n                    //文字样式\r\n                    font: 'normal 14px 微软雅黑',\r\n                    //文本内容\r\n                    text: name,\r\n                    //文本填充样式（即文字颜色）\r\n                    fill: new Fill({ color: fiil_color }),\r\n                    offsetY: 12,\r\n                    scale: 1,\r\n                    stroke: new Stroke({ color: '#ffcc33', width: 2 })\r\n                })\r\n            }));\r\n\r\n        },\r\n        selectStation(select_sta_id) {  //选中某个景点\r\n            for (var i = 0; i < this.stationinfo_data_list.length; i++) {\r\n                var m = this.stationinfo_data_list[i];\r\n                var sta_id = m.net_code + \".\" + m.sta_code;\r\n                var name = m.sta_name;\r\n                var statusSign = 0;\r\n                if (select_sta_id == sta_id) {\r\n                    statusSign = 1;\r\n\r\n                    $('#sta_name').text(m.sta_name);\r\n                    $('#sta_type').text(m.sta_type);\r\n                    $('#site_level').text(m.site_level);\r\n                    $('#site_range').text(m.site_range);\r\n                    $('#site_adress').text(m.site_adress);\r\n\r\n                    $('#net_code').text(m.net_code);\r\n                    $('#sta_code').text(m.sta_code);\r\n                    $('#loc').text(m.sta_lon + ',' + m.sta_lat);\r\n                    $('#site_pic').html('<img src=\"/static/images/show/' + m.site_pic + '\" width=\"100%\" height=\"240\"/>');\r\n                    $('#site_introduce').html(\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\" + m.site_instroduce);\r\n                  // 如果景点信息中包含官方网址，则将它保存到按钮的 data-url 属性中\r\n                  // 获取景点官方网址\r\n                  var siteUrl = m.site_url;\r\n\r\n                  // 如果存在官方网址，则保存到组件的数据属性中\r\n                  if (siteUrl) {\r\n                    this.siteUrl = siteUrl;\r\n                  } else {\r\n                    // 如果不存在官方网址，则置为null，按钮将不显示\r\n                    this.siteUrl = null;\r\n                  }\r\n                    $(\"#m_site_info\").show();\r\n                }\r\n                this.changeOneMarkerStatus(sta_id, name, statusSign);\r\n            }\r\n        },\r\n        goToSite() {\r\n        // 获取当前选定景点的官方网站链接\r\n        var siteUrl = this.siteUrl;\r\n\r\n        // 如果链接存在，则进行跳转\r\n        if (siteUrl) {\r\n          window.open(siteUrl, '_blank');\r\n        } else {\r\n          alert('未找到景点官方网站链接！');\r\n        }\r\n        },\r\n        rendStationInfoData(type) {  //显示景点\r\n            this.select_sta_type = type;\r\n            if (this.staVectorLayer != null) {\r\n                this.map.removeLayer(this.staVectorLayer);\r\n            }\r\n\r\n            this.staVectorSource = new VectorSource({\r\n                features: []\r\n            });\r\n            this.staVectorLayer = new VectorLayer({\r\n                source: this.staVectorSource\r\n            });\r\n            this.map.addLayer(this.staVectorLayer);\r\n\r\n            if(this.stationinfo_data_list == null){\r\n                return\r\n            }\r\n\r\n            for (var i = 0; i < this.stationinfo_data_list.length; i++) {\r\n                var m = this.stationinfo_data_list[i];\r\n                console.log(m);\r\n                var filerSign = mapcommon.is_show_station(m, this.select_sta_type);\r\n                if (filerSign) {\r\n                    continue;\r\n                }\r\n                var sta01 = mapcommon.buildStationImageMarker(m);\r\n                this.staVectorSource.addFeature(sta01);\r\n            }\r\n\r\n            //为地图容器添加单击事件监听\r\n            let that = this;\r\n            that.map.on('click', function (event) {\r\n                let feature = that.map.forEachFeatureAtPixel(event.pixel, function (feature, layer) {\r\n                    return feature;\r\n                })\r\n                if (feature) {\r\n                    console.log(feature.getId());\r\n                    that.selectStation(feature.getId());\r\n                }\r\n            });\r\n\r\n\r\n        },\r\n      rendStationInfoData11(type) {  //显示各景点的强震动参数\r\n        this.select_sta_type = type;\r\n        if (this.staVectorLayer != null) {\r\n          this.map.removeLayer(this.staVectorLayer);\r\n        }\r\n\r\n        this.staVectorSource = new VectorSource({\r\n          features: []\r\n        });\r\n        this.staVectorLayer = new VectorLayer({\r\n          source: this.staVectorSource\r\n        });\r\n        this.map.addLayer(this.staVectorLayer);\r\n\r\n        if(this.real_strong_data_list == null){\r\n          return\r\n        }\r\n\r\n        var curIndex = 1;\r\n        for (var i = 0; i < this.real_strong_data_list.length; i++) {\r\n          var m = this.real_strong_data_list[i];\r\n          console.log(m);\r\n          var filerSign = mapcommon.is_show_station(m, this.select_sta_type);\r\n          if (filerSign) {\r\n            continue;\r\n          }\r\n          var sta01 = mapcommon.buildStationDivMarker(m);\r\n          //console.log(sta01);\r\n          this.staVectorSource.addFeature(sta01);\r\n\r\n          curIndex += 1;\r\n        }\r\n         //为地图容器添加单击事件监听\r\n         let that = this;\r\n            that.map.on('click', function (event) {\r\n                let feature = that.map.forEachFeatureAtPixel(event.pixel, function (feature, layer) {\r\n                    return feature;\r\n                })\r\n                if (feature) {\r\n                    console.log(feature.getId());\r\n                    that.selectStation(feature.getId());\r\n                }\r\n            });\r\n      },\r\n      clusterStyle() {  //聚合标注样式\r\n        return (feature, solution) => {\r\n          var total = 0;\r\n          feature.get(\"features\").forEach((value, index) => {\r\n            total += value.get(\"value\");\r\n          });\r\n          var style = new Style({\r\n            image: new CircleStyle({\r\n              radius: 15,\r\n              stroke: new Stroke({\r\n                color: \"blue\"\r\n              }),\r\n              fill: new Fill({\r\n                color: \"rgba(24,144,255,100)\"\r\n              })\r\n            }),\r\n            text: new Text({\r\n              text: total.toString(),\r\n              fill: new Fill({\r\n                color: \"#FFF\"\r\n              }),\r\n              font: \"12px Calibri,sans-serif\",\r\n              stroke: new Stroke({\r\n                color: \"red\",\r\n                width: 5\r\n              })\r\n            })\r\n          });\r\n          return style;\r\n        };\r\n      },\r\n      initCluster(visiable) { //添加聚合图层\r\n\r\n        if (visiable) {\r\n\r\n          if (this.staVectorLayer != null) {\r\n            this.map.removeLayer(this.staVectorLayer);\r\n          }\r\n          if (this.clusterLayer != null) {\r\n            this.map.removeLayer(this.clusterLayer);\r\n          }\r\n\r\n          let source = new VectorSource();\r\n          let clusterSource = new Cluster({\r\n            distance: parseInt(20, 10),\r\n            source: source\r\n          });\r\n          this.clusterLayer = new VectorLayer({\r\n            source: clusterSource,\r\n            style: this.clusterStyle.call(this)\r\n          });\r\n          this.map.addLayer(this.clusterLayer);\r\n          for (var i = 0; i < this.stationinfo_data_list.length; i++) {\r\n            var m = this.stationinfo_data_list[i];\r\n            var latLon = [parseFloat(m.sta_lon), parseFloat(m.sta_lat)];\r\n            var f = new Feature({\r\n              geometry: new Point(latLon)\r\n            });\r\n            f.set(\"name\", m.sta_code);\r\n            f.set(\"value\", 1);\r\n            source.addFeature(f);\r\n          }\r\n        } else {\r\n          if (this.clusterLayer != null) {\r\n            this.map.removeLayer(this.clusterLayer);\r\n            this.rendStationInfoData(this.select_sta_type);\r\n          }\r\n        }\r\n\r\n      },\r\n      //热力图\r\n      initHeatMapLayer(visiable) {   //显示热力图\r\n        if (visiable) {\r\n          if (this.heatData.features.length == 0)\r\n            for (var i = 0; i < this.stationinfo_data_list.length; i++) {\r\n              var m = this.stationinfo_data_list[i];\r\n              var latLon = [parseFloat(m.sta_lon), parseFloat(m.sta_lat)];\r\n              var data = {\r\n                type: \"Feature\",\r\n                geometry: { type: \"Point\", coordinates: latLon },\r\n                properties: { weight: 1 }\r\n              };\r\n              this.heatData.features.push(data);\r\n            }\r\n\r\n          if (this.heatMapLayer != null) {\r\n            this.map.removeLayer(this.heatMapLayer);\r\n          }\r\n          this.heatMapLayer = new HeatmapLayer({\r\n            source: new VectorSource({\r\n              features: new GeoJSON().readFeatures(this.heatData)\r\n            }),\r\n            blur: this.option_heatmap.blur,\r\n            radius: this.option_heatmap.radius,\r\n            weight: (e) => {\r\n              return e.values_.weight;//根据权重展示热力图！关键点，weight范围为：0-1！！！\r\n            },\r\n          });\r\n          this.map.addLayer(this.heatMapLayer);\r\n          this.rendStationInfoData11(this.select_sta_type);\r\n        } else {\r\n          if (this.heatMapLayer != null) {\r\n            this.map.removeLayer(this.heatMapLayer);\r\n            this.rendStationInfoData11(this.select_sta_type);\r\n          }\r\n        }\r\n      },\r\n        initLeftMenu() {  //初始化左侧菜单\r\n            let that = this;\r\n            $(document).on('click', '.left_menu_bar div', function (event) {\r\n                var event_type = event.type;\r\n                var type = $(this).attr('type');\r\n                var action = $(this).attr('action');\r\n                if (type == 'bt') {\r\n                    if (action == 'zoom_in') {\r\n                        var view = that.map.getView();\r\n                        var zoom = view.getZoom();\r\n                        view.setZoom(zoom + 1);\r\n                    } else {\r\n                        var view = that.map.getView();\r\n                        var zoom = view.getZoom();\r\n                        view.setZoom(zoom - 1);\r\n                    }\r\n                }\r\n                else if(type=='add'){\r\n                  $(\"#m_select_range\").hide();\r\n                  $(\"#m_countinfo\").hide();\r\n                  $(\"#m_selectmarker\").hide();\r\n                  $(\"#m_baselayer\").hide();\r\n                  $(\"#m_addsite\").show();\r\n                }\r\n                else if (type == 'mesure') {\r\n                    if(that.select_mesure_type == null || that.select_mesure_type != action){\r\n\r\n                        that.select_mesure_type = action;\r\n                        $(\".left_menu_bar\").find(\"div\").attr(\"class\", \"left_bt_item\");\r\n                        $(this).attr('class', 'left_bt_item_s');\r\n                        if(action == 'mesure_line'){\r\n                            that.measureFun('LineString')\r\n\r\n                        }else if(action == 'mesure_area'){\r\n                            that.measureFun('Polygon')\r\n                        }\r\n                    }else{\r\n                        that.select_mesure_type = null;\r\n                        $(\".left_menu_bar\").find(\"div\").attr(\"class\", \"left_bt_item\");\r\n                        if(action == 'mesure_line'){\r\n\r\n                        }else if(action == 'mesure_area'){\r\n\r\n                        }\r\n                    }\r\n                }\r\n                else if (type == 'theme') {\r\n                  if (that.select_theme_type == null || that.select_theme_type != action) {\r\n                    that.select_theme_type = action;\r\n\r\n                    // $(\".right_menu_bar\").find(\"div\").attr(\"class\", \"right_bt_item\");\r\n                    // $(this).attr('class', 'right_bt_item_s');\r\n                    /*此处有修改！！！！！！！！！！！！！！！！！！！！！！！111*/\r\n                    $(\".left_menu_bar\").find(\"div\").attr(\"class\", \"left_bt_item\");\r\n                    $(this).attr('class', 'left_bt_item_s');\r\n                    if (action == 'image_layer') {\r\n                    } else if (action == 'heat_layer') {\r\n                      that.initHeatMapLayer(true);\r\n                    } else if (action == 'cluster_layer') {\r\n                      that.initCluster(true);\r\n                    }\r\n                  }\r\n                  else {\r\n                    that.select_theme_type = null;\r\n                    $(\".right_menu_bar\").find(\"div\").attr(\"class\", \"right_bt_item\");\r\n                    if (action == 'image_layer') {\r\n                      that.initImageLayer(false);\r\n                    } else if (action == 'heat_layer') {\r\n                      that.initHeatMapLayer(false);\r\n                    } else if (action == 'cluster_layer') {\r\n                      that.initCluster(false);\r\n                    }\r\n                  }\r\n                }\r\n            });\r\n        },\r\n        initTopMenu() {  //初始化顶部菜单\r\n            let that = this;\r\n            $(document).on('click', '.top-menu-bar div', function (event) {\r\n                var event_type = event.type;\r\n                var type = $(this).attr('type');\r\n                that.cur_top_menu_select = type;\r\n                $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\r\n                $(this).attr('class', 'menu-bt-bg-s');\r\n\r\n                if (type == 'baselayer') {\r\n                    $(\"#m_select_range\").hide();\r\n                    $(\"#m_countinfo\").hide();\r\n                    $(\"#m_selectmarker\").hide();\r\n                    $(\"#m_addsite\").hide();\r\n                    $(\"#m_baselayer\").show();\r\n                } else if (type == 'countinfo') {\r\n                    $(\"#m_select_range\").hide();\r\n                    $(\"#m_baselayer\").hide();\r\n                    $(\"#m_selectmarker\").hide();\r\n                    $(\"#m_addsite\").hide();\r\n                    $(\"#m_countinfo\").show();\r\n                } else if (type == 'marker') {\r\n                    $(\"#m_select_range\").hide();\r\n                    $(\"#m_countinfo\").hide();\r\n                    $(\"#m_baselayer\").hide();\r\n                    $(\"#m_addsite\").hide();\r\n                    $(\"#m_selectmarker\").show();\r\n                } else if (type == 'rangelayer') {\r\n                    $(\"#m_select_range\").show();\r\n                    $(\"#m_countinfo\").hide();\r\n                    $(\"#m_baselayer\").hide();\r\n                    $(\"#m_selectmarker\").hide();\r\n                    $(\"#m_addsite\").hide();\r\n                }\r\n            });\r\n\r\n\r\n            //底图图层弹出窗口的关闭事件\r\n            $(document).on(\"click\", \"#m_baselayer_close\", function (event) {\r\n                event.preventDefault();\r\n                $(\"#m_baselayer\").hide();\r\n                $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\r\n            });\r\n\r\n            //选择边界图层弹出窗口的关闭事件\r\n            $(document).on(\"click\", \"#m_select_range_close\", function (event) {\r\n                event.preventDefault();\r\n                $(\"#m_select_range\").hide();\r\n                $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\r\n            });\r\n\r\n            //选择标注图层弹出窗口的关闭事件\r\n            $(document).on(\"click\", \"#m_selectmarker_close\", function (event) {\r\n                event.preventDefault();\r\n                $(\"#m_selectmarker\").hide();\r\n                $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\r\n            });\r\n\r\n            //统计信息图层弹出窗口的关闭事件\r\n            $(document).on(\"click\", \"#m_countinfo_close\", function (event) {\r\n                event.preventDefault();\r\n                $(\"#m_countinfo\").hide();\r\n                $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\r\n            });\r\n\r\n            //站点信息图层弹出窗口的关闭事件\r\n            $(document).on(\"click\", \"#m_site_info_close\", function (event) {\r\n                event.preventDefault();\r\n                $(\"#m_site_info\").hide();\r\n                $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\r\n            });\r\n\r\n        },\r\n        initShowWindow() { //初始化弹出窗的功能\r\n            let that = this;\r\n            $(document).on(\"click\", \".baselayer_select .menu_con\", function (event) {\r\n                event.preventDefault();\r\n                var type = $(this).attr(\"id\");\r\n                $('.baselayer_select .menu_con').attr('class', 'menu_con');\r\n                $(this).attr(\"class\", \"menu_con menu_con_select\");\r\n\r\n                that.changeBaseMap(type);\r\n            });\r\n\r\n            $(document).on(\"click\", \".select_range_type .show_windows_select_content\", function (event) {\r\n                event.preventDefault();\r\n                var type = $(this).attr(\"id\");\r\n                $('.select_range_type .show_windows_select_content').attr('class', 'show_windows_select_content');\r\n                $(this).attr(\"class\", \"show_windows_select_content menu_con_select\");\r\n                that.addForestry(type);\r\n            });\r\n\r\n            $(document).on(\"click\", \".select_marker_type .show_windows_select_content\", function (event) {\r\n                event.preventDefault();\r\n                var type = $(this).attr(\"id\");\r\n                console.log(type);\r\n                $('.select_marker_type .show_windows_select_content').attr('class', 'show_windows_select_content');\r\n                $(this).attr(\"class\", \"show_windows_select_content menu_con_select\");\r\n                that.rendStationInfoData(type);\r\n            });\r\n\r\n        },\r\n      initData() {  //初始化数据\r\n        let that = this;\r\n        $.ajax({\r\n          type: \"get\",\r\n          url: \"/static/data/stationinfo.json?time=\" + new Date().getTime(),\r\n          dataType: \"json\",\r\n          error: function () {\r\n            alert(\"获取数据失败！\");\r\n          },\r\n          success: function (resp) {\r\n            that.stationinfo_data_list = resp.data;\r\n            console.log(that.stationinfo_data_list);\r\n            that.select_sta_type = \"all\";\r\n            if (that.staVectorLayer != null) {\r\n              that.map.removeLayer(that.staVectorLayer);\r\n            }\r\n            that.staVectorSource = new VectorSource({\r\n              features: []\r\n            });\r\n            that.staVectorLayer = new VectorLayer({\r\n              source: that.staVectorSource\r\n            });\r\n            that.map.addLayer(that.staVectorLayer);\r\n\r\n            var curIndex = 1;\r\n            for (var i = 0; i < that.stationinfo_data_list.length; i++) {\r\n              var m = that.stationinfo_data_list[i];\r\n              var filerSign = mapcommon.is_show_station(m, that.select_sta_type);\r\n              if (filerSign) {\r\n                continue;\r\n              }\r\n              var sta01 = mapcommon.buildStationImageMarker(m);\r\n              that.staVectorSource.addFeature(sta01);\r\n              curIndex += 1;\r\n            }\r\n          }\r\n        });\r\n      },\r\n      measureFun(option) { // 空间测量\r\n            switch (option) {\r\n                case 'Point':\r\n                    Measure.measure(this.map, 'Point')\r\n                    break\r\n                case 'LineString':\r\n                    Measure.measure(this.map, 'LineString')\r\n                    break\r\n                case 'Polygon':\r\n                    Measure.measure(this.map, 'Polygon')\r\n                    break\r\n            }\r\n        },\r\n    },\r\n    mounted() {\r\n        this.initData();\r\n        this.initMap();\r\n        this.initTopMenu();\r\n        this.initLeftMenu();\r\n        this.initShowWindow();\r\n        this.addForestry(\"city\");\r\n    }\r\n}\r\n</script>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}