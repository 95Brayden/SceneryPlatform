{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\n/**\n * @module ol/net\n */\nimport { getUid } from './util.js';\n\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {Function} [errback] Callback on error.\n * @param {string} [callbackParam] Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, errback, callbackParam) {\n  const script = document.createElement('script');\n  const key = 'olc_' + getUid(callback);\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n  script.async = true;\n  script.src = url + (url.includes('?') ? '&' : '?') + (callbackParam || 'callback') + '=' + key;\n  const timer = setTimeout(function () {\n    cleanup();\n    if (errback) {\n      errback();\n    }\n  }, 10000);\n  window[key] = function (data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n  document.head.appendChild(script);\n}\nexport class ResponseError extends Error {\n  /**\n   * @param {XMLHttpRequest} response The XHR object.\n   */\n  constructor(response) {\n    const message = 'Unexpected response status: ' + response.status;\n    super(message);\n\n    /**\n     * @type {string}\n     */\n    this.name = 'ResponseError';\n\n    /**\n     * @type {XMLHttpRequest}\n     */\n    this.response = response;\n  }\n}\nexport class ClientError extends Error {\n  /**\n   * @param {XMLHttpRequest} client The XHR object.\n   */\n  constructor(client) {\n    super('Failed to issue request');\n\n    /**\n     * @type {string}\n     */\n    this.name = 'ClientError';\n\n    /**\n     * @type {XMLHttpRequest}\n     */\n    this.client = client;\n  }\n}\n\n/**\n * @param {string} url The URL.\n * @return {Promise<Object>} A promise that resolves to the JSON response.\n */\nexport function getJSON(url) {\n  return new Promise(function (resolve, reject) {\n    /**\n     * @param {ProgressEvent<XMLHttpRequest>} event The load event.\n     */\n    function onLoad(event) {\n      const client = event.target;\n      // status will be 0 for file:// urls\n      if (!client.status || client.status >= 200 && client.status < 300) {\n        let data;\n        try {\n          data = JSON.parse(client.responseText);\n        } catch (err) {\n          const message = 'Error parsing response text as JSON: ' + err.message;\n          reject(new Error(message));\n          return;\n        }\n        resolve(data);\n        return;\n      }\n      reject(new ResponseError(client));\n    }\n\n    /**\n     * @param {ProgressEvent<XMLHttpRequest>} event The error event.\n     */\n    function onError(event) {\n      reject(new ClientError(event.target));\n    }\n    const client = new XMLHttpRequest();\n    client.addEventListener('load', onLoad);\n    client.addEventListener('error', onError);\n    client.open('GET', url);\n    client.setRequestHeader('Accept', 'application/json');\n    client.send();\n  });\n}\n\n/**\n * @param {string} base The base URL.\n * @param {string} url The potentially relative URL.\n * @return {string} The full URL.\n */\nexport function resolveUrl(base, url) {\n  if (url.includes('://')) {\n    return url;\n  }\n  return new URL(url, base).href;\n}\nlet originalXHR;\nexport function overrideXHR(xhr) {\n  if (typeof XMLHttpRequest !== 'undefined') {\n    originalXHR = XMLHttpRequest;\n  }\n  global.XMLHttpRequest = xhr;\n}\nexport function restoreXHR() {\n  global.XMLHttpRequest = originalXHR;\n}","map":{"version":3,"names":["getUid","jsonp","url","callback","errback","callbackParam","script","document","createElement","key","cleanup","window","parentNode","removeChild","async","src","includes","timer","setTimeout","data","clearTimeout","head","appendChild","ResponseError","Error","constructor","response","message","status","name","ClientError","client","getJSON","Promise","resolve","reject","onLoad","event","target","JSON","parse","responseText","err","onError","XMLHttpRequest","addEventListener","open","setRequestHeader","send","resolveUrl","base","URL","href","originalXHR","overrideXHR","xhr","global","restoreXHR"],"sources":["E:/Desktop/scenerymonitor/node_modules/ol/net.js"],"sourcesContent":["/**\n * @module ol/net\n */\nimport {getUid} from './util.js';\n\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {Function} [errback] Callback on error.\n * @param {string} [callbackParam] Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, errback, callbackParam) {\n  const script = document.createElement('script');\n  const key = 'olc_' + getUid(callback);\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n  script.async = true;\n  script.src =\n    url +\n    (url.includes('?') ? '&' : '?') +\n    (callbackParam || 'callback') +\n    '=' +\n    key;\n  const timer = setTimeout(function () {\n    cleanup();\n    if (errback) {\n      errback();\n    }\n  }, 10000);\n  window[key] = function (data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n  document.head.appendChild(script);\n}\n\nexport class ResponseError extends Error {\n  /**\n   * @param {XMLHttpRequest} response The XHR object.\n   */\n  constructor(response) {\n    const message = 'Unexpected response status: ' + response.status;\n    super(message);\n\n    /**\n     * @type {string}\n     */\n    this.name = 'ResponseError';\n\n    /**\n     * @type {XMLHttpRequest}\n     */\n    this.response = response;\n  }\n}\n\nexport class ClientError extends Error {\n  /**\n   * @param {XMLHttpRequest} client The XHR object.\n   */\n  constructor(client) {\n    super('Failed to issue request');\n\n    /**\n     * @type {string}\n     */\n    this.name = 'ClientError';\n\n    /**\n     * @type {XMLHttpRequest}\n     */\n    this.client = client;\n  }\n}\n\n/**\n * @param {string} url The URL.\n * @return {Promise<Object>} A promise that resolves to the JSON response.\n */\nexport function getJSON(url) {\n  return new Promise(function (resolve, reject) {\n    /**\n     * @param {ProgressEvent<XMLHttpRequest>} event The load event.\n     */\n    function onLoad(event) {\n      const client = event.target;\n      // status will be 0 for file:// urls\n      if (!client.status || (client.status >= 200 && client.status < 300)) {\n        let data;\n        try {\n          data = JSON.parse(client.responseText);\n        } catch (err) {\n          const message = 'Error parsing response text as JSON: ' + err.message;\n          reject(new Error(message));\n          return;\n        }\n        resolve(data);\n        return;\n      }\n\n      reject(new ResponseError(client));\n    }\n\n    /**\n     * @param {ProgressEvent<XMLHttpRequest>} event The error event.\n     */\n    function onError(event) {\n      reject(new ClientError(event.target));\n    }\n\n    const client = new XMLHttpRequest();\n    client.addEventListener('load', onLoad);\n    client.addEventListener('error', onError);\n    client.open('GET', url);\n    client.setRequestHeader('Accept', 'application/json');\n    client.send();\n  });\n}\n\n/**\n * @param {string} base The base URL.\n * @param {string} url The potentially relative URL.\n * @return {string} The full URL.\n */\nexport function resolveUrl(base, url) {\n  if (url.includes('://')) {\n    return url;\n  }\n  return new URL(url, base).href;\n}\n\nlet originalXHR;\nexport function overrideXHR(xhr) {\n  if (typeof XMLHttpRequest !== 'undefined') {\n    originalXHR = XMLHttpRequest;\n  }\n  global.XMLHttpRequest = xhr;\n}\n\nexport function restoreXHR() {\n  global.XMLHttpRequest = originalXHR;\n}\n"],"mappings":";;;AAAA;AACA;AACA;AACA,SAAQA,MAAM,QAAO,WAAW;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,KAAKA,CAACC,GAAG,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,aAAa,EAAE;EAC3D,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAC/C,MAAMC,GAAG,GAAG,MAAM,GAAGT,MAAM,CAACG,QAAQ,CAAC;EACrC,SAASO,OAAOA,CAAA,EAAG;IACjB,OAAOC,MAAM,CAACF,GAAG,CAAC;IAClBH,MAAM,CAACM,UAAU,CAACC,WAAW,CAACP,MAAM,CAAC;EACvC;EACAA,MAAM,CAACQ,KAAK,GAAG,IAAI;EACnBR,MAAM,CAACS,GAAG,GACRb,GAAG,IACFA,GAAG,CAACc,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,IAC9BX,aAAa,IAAI,UAAU,CAAC,GAC7B,GAAG,GACHI,GAAG;EACL,MAAMQ,KAAK,GAAGC,UAAU,CAAC,YAAY;IACnCR,OAAO,CAAC,CAAC;IACT,IAAIN,OAAO,EAAE;MACXA,OAAO,CAAC,CAAC;IACX;EACF,CAAC,EAAE,KAAK,CAAC;EACTO,MAAM,CAACF,GAAG,CAAC,GAAG,UAAUU,IAAI,EAAE;IAC5BC,YAAY,CAACH,KAAK,CAAC;IACnBP,OAAO,CAAC,CAAC;IACTP,QAAQ,CAACgB,IAAI,CAAC;EAChB,CAAC;EACDZ,QAAQ,CAACc,IAAI,CAACC,WAAW,CAAChB,MAAM,CAAC;AACnC;AAEA,OAAO,MAAMiB,aAAa,SAASC,KAAK,CAAC;EACvC;AACF;AACA;EACEC,WAAWA,CAACC,QAAQ,EAAE;IACpB,MAAMC,OAAO,GAAG,8BAA8B,GAAGD,QAAQ,CAACE,MAAM;IAChE,KAAK,CAACD,OAAO,CAAC;;IAEd;AACJ;AACA;IACI,IAAI,CAACE,IAAI,GAAG,eAAe;;IAE3B;AACJ;AACA;IACI,IAAI,CAACH,QAAQ,GAAGA,QAAQ;EAC1B;AACF;AAEA,OAAO,MAAMI,WAAW,SAASN,KAAK,CAAC;EACrC;AACF;AACA;EACEC,WAAWA,CAACM,MAAM,EAAE;IAClB,KAAK,CAAC,yBAAyB,CAAC;;IAEhC;AACJ;AACA;IACI,IAAI,CAACF,IAAI,GAAG,aAAa;;IAEzB;AACJ;AACA;IACI,IAAI,CAACE,MAAM,GAAGA,MAAM;EACtB;AACF;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASC,OAAOA,CAAC9B,GAAG,EAAE;EAC3B,OAAO,IAAI+B,OAAO,CAAC,UAAUC,OAAO,EAAEC,MAAM,EAAE;IAC5C;AACJ;AACA;IACI,SAASC,MAAMA,CAACC,KAAK,EAAE;MACrB,MAAMN,MAAM,GAAGM,KAAK,CAACC,MAAM;MAC3B;MACA,IAAI,CAACP,MAAM,CAACH,MAAM,IAAKG,MAAM,CAACH,MAAM,IAAI,GAAG,IAAIG,MAAM,CAACH,MAAM,GAAG,GAAI,EAAE;QACnE,IAAIT,IAAI;QACR,IAAI;UACFA,IAAI,GAAGoB,IAAI,CAACC,KAAK,CAACT,MAAM,CAACU,YAAY,CAAC;QACxC,CAAC,CAAC,OAAOC,GAAG,EAAE;UACZ,MAAMf,OAAO,GAAG,uCAAuC,GAAGe,GAAG,CAACf,OAAO;UACrEQ,MAAM,CAAC,IAAIX,KAAK,CAACG,OAAO,CAAC,CAAC;UAC1B;QACF;QACAO,OAAO,CAACf,IAAI,CAAC;QACb;MACF;MAEAgB,MAAM,CAAC,IAAIZ,aAAa,CAACQ,MAAM,CAAC,CAAC;IACnC;;IAEA;AACJ;AACA;IACI,SAASY,OAAOA,CAACN,KAAK,EAAE;MACtBF,MAAM,CAAC,IAAIL,WAAW,CAACO,KAAK,CAACC,MAAM,CAAC,CAAC;IACvC;IAEA,MAAMP,MAAM,GAAG,IAAIa,cAAc,CAAC,CAAC;IACnCb,MAAM,CAACc,gBAAgB,CAAC,MAAM,EAAET,MAAM,CAAC;IACvCL,MAAM,CAACc,gBAAgB,CAAC,OAAO,EAAEF,OAAO,CAAC;IACzCZ,MAAM,CAACe,IAAI,CAAC,KAAK,EAAE5C,GAAG,CAAC;IACvB6B,MAAM,CAACgB,gBAAgB,CAAC,QAAQ,EAAE,kBAAkB,CAAC;IACrDhB,MAAM,CAACiB,IAAI,CAAC,CAAC;EACf,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAUA,CAACC,IAAI,EAAEhD,GAAG,EAAE;EACpC,IAAIA,GAAG,CAACc,QAAQ,CAAC,KAAK,CAAC,EAAE;IACvB,OAAOd,GAAG;EACZ;EACA,OAAO,IAAIiD,GAAG,CAACjD,GAAG,EAAEgD,IAAI,CAAC,CAACE,IAAI;AAChC;AAEA,IAAIC,WAAW;AACf,OAAO,SAASC,WAAWA,CAACC,GAAG,EAAE;EAC/B,IAAI,OAAOX,cAAc,KAAK,WAAW,EAAE;IACzCS,WAAW,GAAGT,cAAc;EAC9B;EACAY,MAAM,CAACZ,cAAc,GAAGW,GAAG;AAC7B;AAEA,OAAO,SAASE,UAAUA,CAAA,EAAG;EAC3BD,MAAM,CAACZ,cAAc,GAAGS,WAAW;AACrC"},"metadata":{},"sourceType":"module","externalDependencies":[]}