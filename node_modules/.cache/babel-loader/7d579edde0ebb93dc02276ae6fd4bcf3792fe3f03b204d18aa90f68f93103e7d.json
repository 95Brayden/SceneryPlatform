{"ast":null,"code":"import { computed } from 'vue';\nimport '../../components/config-provider/index.mjs';\nimport '../../utils/index.mjs';\nimport { buildProps } from '../../utils/vue/props/runtime.mjs';\nimport { isFunction } from '@vue/shared';\nimport { useGlobalConfig } from '../../components/config-provider/src/hooks/use-global-config.mjs';\nimport { debugWarn } from '../../utils/error.mjs';\nconst SCOPE = \"use-empty-values\";\nconst DEFAULT_EMPTY_VALUES = [\"\", void 0, null];\nconst DEFAULT_VALUE_ON_CLEAR = void 0;\nconst useEmptyValuesProps = buildProps({\n  emptyValues: Array,\n  valueOnClear: {\n    type: [String, Number, Boolean, Function],\n    default: void 0,\n    validator: val => isFunction(val) ? !val() : !val\n  }\n});\nconst useEmptyValues = (props, defaultValue) => {\n  const config = useGlobalConfig();\n  config.value = config.value || {};\n  const emptyValues = computed(() => props.emptyValues || config.value.emptyValues || DEFAULT_EMPTY_VALUES);\n  const valueOnClear = computed(() => {\n    if (isFunction(props.valueOnClear)) {\n      return props.valueOnClear();\n    } else if (props.valueOnClear !== void 0) {\n      return props.valueOnClear;\n    } else if (isFunction(config.value.valueOnClear)) {\n      return config.value.valueOnClear();\n    } else if (config.value.valueOnClear !== void 0) {\n      return config.value.valueOnClear;\n    }\n    return defaultValue !== void 0 ? defaultValue : DEFAULT_VALUE_ON_CLEAR;\n  });\n  const isEmptyValue = value => {\n    return emptyValues.value.includes(value);\n  };\n  if (!emptyValues.value.includes(valueOnClear.value)) {\n    debugWarn(SCOPE, \"value-on-clear should be a value of empty-values\");\n  }\n  return {\n    emptyValues,\n    valueOnClear,\n    isEmptyValue\n  };\n};\nexport { DEFAULT_EMPTY_VALUES, DEFAULT_VALUE_ON_CLEAR, SCOPE, useEmptyValues, useEmptyValuesProps };","map":{"version":3,"names":["SCOPE","DEFAULT_EMPTY_VALUES","DEFAULT_VALUE_ON_CLEAR","useEmptyValuesProps","buildProps","emptyValues","Array","valueOnClear","type","String","Number","Boolean","Function","default","validator","val","isFunction","useEmptyValues","props","defaultValue","config","useGlobalConfig","value","computed","isEmptyValue","includes","debugWarn"],"sources":["../../../../../packages/hooks/use-empty-values/index.ts"],"sourcesContent":["import { computed } from 'vue'\nimport { useGlobalConfig } from '@element-plus/components/config-provider'\nimport { buildProps, debugWarn, isFunction } from '@element-plus/utils'\n\nimport type { ExtractPropTypes } from 'vue'\n\nexport const SCOPE = 'use-empty-values'\nexport const DEFAULT_EMPTY_VALUES = ['', undefined, null]\nexport const DEFAULT_VALUE_ON_CLEAR = undefined\n\nexport const useEmptyValuesProps = buildProps({\n  /**\n   * @description empty values supported by the component\n   */\n  emptyValues: Array,\n  /**\n   * @description return value when cleared, if you want to set `undefined`, use `() => undefined`\n   */\n  valueOnClear: {\n    type: [String, Number, Boolean, Function],\n    default: undefined,\n    validator: (val: any) => (isFunction(val) ? !val() : !val),\n  },\n} as const)\n\nexport const useEmptyValues = (\n  props: ExtractPropTypes<typeof useEmptyValuesProps>,\n  defaultValue?: null | undefined\n) => {\n  const config = useGlobalConfig()\n  config.value = config.value || {}\n\n  const emptyValues = computed(\n    () => props.emptyValues || config.value.emptyValues || DEFAULT_EMPTY_VALUES\n  )\n\n  const valueOnClear = computed(() => {\n    // function is used for undefined cause undefined can't be a value of prop\n    if (isFunction(props.valueOnClear)) {\n      return props.valueOnClear()\n    } else if (props.valueOnClear !== undefined) {\n      return props.valueOnClear\n    } else if (isFunction(config.value.valueOnClear)) {\n      return config.value.valueOnClear()\n    } else if (config.value.valueOnClear !== undefined) {\n      return config.value.valueOnClear\n    }\n    return defaultValue !== undefined ? defaultValue : DEFAULT_VALUE_ON_CLEAR\n  })\n\n  const isEmptyValue = (value: any) => {\n    return emptyValues.value.includes(value)\n  }\n\n  if (!emptyValues.value.includes(valueOnClear.value)) {\n    debugWarn(SCOPE, 'value-on-clear should be a value of empty-values')\n  }\n\n  return {\n    emptyValues,\n    valueOnClear,\n    isEmptyValue,\n  }\n}\n"],"mappings":";;;;;;;AAGY,MAACA,KAAK,GAAG;AACT,MAACC,oBAAoB,GAAG,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,IAAI;AACzC,MAACC,sBAAsB,GAAG,KAAK;AAC/B,MAACC,mBAAmB,GAAGC,UAAU,CAAC;EAC5CC,WAAW,EAAEC,KAAK;EAClBC,YAAY,EAAE;IACZC,IAAI,EAAE,CAACC,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAEC,QAAQ,CAAC;IACzCC,OAAO,EAAE,KAAK,CAAC;IACfC,SAAS,EAAGC,GAAG,IAAKC,UAAU,CAACD,GAAG,CAAC,GAAG,CAACA,GAAG,EAAE,GAAG,CAACA;EACpD;AACA,CAAC;AACW,MAACE,cAAc,GAAGA,CAACC,KAAK,EAAEC,YAAY,KAAK;EACrD,MAAMC,MAAM,GAAGC,eAAe,EAAE;EAChCD,MAAM,CAACE,KAAK,GAAGF,MAAM,CAACE,KAAK,IAAI,EAAE;EACjC,MAAMjB,WAAW,GAAGkB,QAAQ,CAAC,MAAML,KAAK,CAACb,WAAW,IAAIe,MAAM,CAACE,KAAK,CAACjB,WAAW,IAAIJ,oBAAoB,CAAC;EACzG,MAAMM,YAAY,GAAGgB,QAAQ,CAAC,MAAM;IAClC,IAAIP,UAAU,CAACE,KAAK,CAACX,YAAY,CAAC,EAAE;MAClC,OAAOW,KAAK,CAACX,YAAY,EAAE;IACjC,CAAK,MAAM,IAAIW,KAAK,CAACX,YAAY,KAAK,KAAK,CAAC,EAAE;MACxC,OAAOW,KAAK,CAACX,YAAY;IAC/B,CAAK,MAAM,IAAIS,UAAU,CAACI,MAAM,CAACE,KAAK,CAACf,YAAY,CAAC,EAAE;MAChD,OAAOa,MAAM,CAACE,KAAK,CAACf,YAAY,EAAE;IACxC,CAAK,MAAM,IAAIa,MAAM,CAACE,KAAK,CAACf,YAAY,KAAK,KAAK,CAAC,EAAE;MAC/C,OAAOa,MAAM,CAACE,KAAK,CAACf,YAAY;IACtC;IACI,OAAOY,YAAY,KAAK,KAAK,CAAC,GAAGA,YAAY,GAAGjB,sBAAsB;EAC1E,CAAG,CAAC;EACF,MAAMsB,YAAY,GAAIF,KAAK,IAAK;IAC9B,OAAOjB,WAAW,CAACiB,KAAK,CAACG,QAAQ,CAACH,KAAK,CAAC;EAC5C,CAAG;EACD,IAAI,CAACjB,WAAW,CAACiB,KAAK,CAACG,QAAQ,CAAClB,YAAY,CAACe,KAAK,CAAC,EAAE;IACnDI,SAAS,CAAC1B,KAAK,EAAE,kDAAkD,CAAC;EACxE;EACE,OAAO;IACLK,WAAW;IACXE,YAAY;IACZiB;EACJ,CAAG;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}