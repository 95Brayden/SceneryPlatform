{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport $ from 'jquery';\nimport 'ol/ol.css';\nimport Map from 'ol/Map.js';\nimport View from 'ol/View.js';\nimport GeoJSON from 'ol/format/GeoJSON.js';\nimport { Vector as VectorSource } from 'ol/source';\nimport { Vector as VectorLayer } from \"ol/layer\";\nimport { format } from 'ol/coordinate';\nimport MousePosition from \"ol/control/MousePosition.js\";\nimport { ScaleLine } from 'ol/control.js';\nimport Overlay from 'ol/Overlay.js';\nimport * as echarts from \"echarts\";\nimport mapcommon from '@/js/mapcommon';\nimport basemap_menu from '@/components/topmenu/basemap_menu.vue';\nimport range_menu from '@/components/topmenu/range_menu.vue';\nimport type_menu from '@/components/topmenu/type_menu.vue';\nexport default {\n  name: 'home',\n  components: {\n    basemap_menu,\n    range_menu,\n    type_menu\n  },\n  data() {\n    return {\n      map: null,\n      //地图对象\n      cur_basemap_select: null,\n      //当前选择的底图图层\n      cur_basemap_type: \"esri_worldimagery\",\n      //当前选择的底图图层名称\n      rangeLayer: null,\n      //边界图层\n      select_sta_type: \"all\",\n      //当前选择的显示景点类型\n\n      stationinfo_data_list: null,\n      //景点数据列表\n\n      cur_top_menu_select: null,\n      //当前顶部选择的菜单\n      staVectorSource: null,\n      //景点图标数组\n      staVectorLayer: null,\n      //景点图标图层\n      cur_select_range_type: \"all\"\n    };\n  },\n  methods: {\n    initMap() {\n      //初始化地图\n      this.map = new Map({\n        target: 'ol_map',\n        layers: [],\n        view: new View({\n          projection: \"EPSG:4326\",\n          center: [114.365248, 30.53786],\n          zoom: 10\n        })\n      });\n      this.cur_basemap_select = mapcommon.getBaseMapLayerGroup(this.cur_basemap_type);\n      this.map.addLayer(this.cur_basemap_select);\n\n      //鼠标获取坐标控件\n      const mousePositionControl = new MousePosition({\n        coordinateFormat: function (coordinate) {\n          return format(coordinate, '经纬度:{x},{y}', 4);\n        },\n        projection: 'EPSG:4326',\n        className: 'custom-mouse-position',\n        target: document.getElementById('div_xy'),\n        undefinedHTML: ' '\n      });\n      this.map.addControl(mousePositionControl);\n\n      //实例化比例尺控件（ScaleLine）\n      var scaleLineControl = new ScaleLine({\n        //设置比例尺单位，degrees、imperial、us、nautical、metric（度量单位）\n        units: \"metric\"\n      });\n      this.map.addControl(scaleLineControl);\n\n      // 用户点击地图就会弹出来的窗口（弹窗）\n      const popup = new Overlay({\n        element: document.getElementById('popup')\n      });\n      this.map.addOverlay(popup);\n\n      // 为地图绑定click事件，使用户点击地图就能在对应处弹窗\n      let that = this;\n      that.map.on('click', function (event) {\n        let feature = that.map.forEachFeatureAtPixel(event.pixel, function (feature, layer) {\n          return feature;\n        });\n        if (feature && feature.getId()) {\n          console.log(feature.getId());\n          let element = popup.getElement(); // 获取充当弹窗的DOM元素\n          let coordinate = event.coordinate; // 获取鼠标点击处的坐标\n          popup.setPosition(coordinate); // 将弹窗位置设置为鼠标点击处\n          //element.innerHTML = '<p>The location you clicked was:</p><code>1234</code>';\n        } else {\n          popup.setVisible(false);\n        }\n      });\n    },\n    changeBaseMap(type) {\n      //更改底图图层\n      console.log(type);\n      if (type != \"\") {\n        this.cur_basemap_type = type;\n      }\n      if (this.cur_basemap_select != null) {\n        this.map.removeLayer(this.cur_basemap_select);\n      }\n      this.cur_basemap_select = mapcommon.getBaseMapLayerGroup(this.cur_basemap_type);\n      this.map.addLayer(this.cur_basemap_select);\n      this.addForestry(this.cur_select_range_type);\n    },\n    addForestry(type) {\n      //添加边界\n      if (type != \"\") {\n        this.cur_select_range_type = type;\n      }\n      var m_url = \"/static/data/map/city.json?t=\" + new Date().getTime();\n      var m_weight = 3;\n      if (this.cur_select_range_type == 'city') {\n        m_url = \"/static/data/map/city.json?t=\" + new Date().getTime();\n        m_weight = 3;\n      } else if (this.cur_select_range_type == 'country') {\n        m_url = \"/static/data/map/region.json?t=\" + new Date().getTime();\n        m_weight = 2;\n      } else {\n        m_url = \"/static/data/map/province.json?t=\" + new Date().getTime();\n        m_weight = 1;\n      }\n      if (this.rangeLayer != null || this.rangeLayer == \"undefined\") {\n        //移除已有矢量图层\n        this.map.removeLayer(this.rangeLayer);\n      }\n      var vectorSource = new VectorSource({\n        url: m_url,\n        format: new GeoJSON()\n      });\n      this.rangeLayer = new VectorLayer({\n        //矢量数据源\n        source: vectorSource,\n        //样式设置\n        style: mapcommon.styleFunction\n      });\n\n      //将矢量图层加载到地图中\n      this.map.addLayer(this.rangeLayer);\n      this.rendStationInfoData(this.select_sta_type);\n    },\n    initTopMenu() {\n      //初始化顶部菜单\n      let that = this;\n      $(document).on('click', '.top-menu-bar div', function (event) {\n        var event_type = event.type;\n        var type = $(this).attr('type');\n        that.cur_top_menu_select = type;\n        $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\n        $(this).attr('class', 'menu-bt-bg-s');\n        if (type == 'baselayer') {\n          $(\"#m_select_sta_strong\").hide();\n          $(\"#m_select_range\").hide();\n          $(\"#m_countinfo\").hide();\n          $(\"#m_selectmarker\").hide();\n          $(\"#m_baselayer\").show();\n        } else if (type == 'countinfo') {\n          $(\"#m_select_range\").hide();\n          $(\"#m_baselayer\").hide();\n          $(\"#m_selectmarker\").hide();\n          $(\"#m_all_strong_info\").show();\n          $(\"#m_select_sta_strong\").show();\n        } else if (type == 'marker') {\n          $(\"#m_select_sta_strong\").hide();\n          $(\"#m_select_range\").hide();\n          $(\"#m_countinfo\").hide();\n          $(\"#m_baselayer\").hide();\n          $(\"#m_selectmarker\").show();\n        } else if (type == 'rangelayer') {\n          $(\"#m_select_sta_strong\").hide();\n          $(\"#m_select_range\").show();\n          $(\"#m_countinfo\").hide();\n          $(\"#m_baselayer\").hide();\n          $(\"#m_selectmarker\").hide();\n        }\n      });\n\n      //弹出窗口的关闭事件\n      $(document).on(\"click\", \"#m_all_strong_close\", function (event) {\n        event.preventDefault();\n        $(\"#m_all_strong_info\").hide();\n        $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\n      });\n    },\n    initData() {\n      //初始化数据\n      let that = this;\n      $.ajax({\n        type: \"get\",\n        url: \"/static/data/stationinfo.json?time=\" + new Date().getTime(),\n        dataType: \"json\",\n        error: function () {\n          alert(\"获取数据失败！\");\n        },\n        success: function (resp) {\n          console.log(resp);\n          that.stationinfo_data_list = resp.data;\n          console.log(that.stationinfo_data_list);\n          that.select_sta_type = \"all\";\n          if (that.staVectorLayer != null) {\n            that.map.removeLayer(that.staVectorLayer);\n          }\n          that.staVectorSource = new VectorSource({\n            features: []\n          });\n          that.staVectorLayer = new VectorLayer({\n            source: that.staVectorSource\n          });\n          that.map.addLayer(that.staVectorLayer);\n          var curIndex = 1;\n          for (var i = 0; i < that.stationinfo_data_list.length; i++) {\n            var m = that.stationinfo_data_list[i];\n            console.log(m);\n            var filerSign = mapcommon.is_show_station(m, that.select_sta_type);\n            if (filerSign) {\n              continue;\n            }\n            var sta01 = mapcommon.buildStationImageMarker(m);\n            that.staVectorSource.addFeature(sta01);\n            curIndex += 1;\n          }\n        }\n      });\n    },\n    rendStationInfoData(type) {\n      //显示各景点\n      this.select_sta_type = type;\n      if (this.staVectorLayer != null) {\n        this.map.removeLayer(this.staVectorLayer);\n      }\n      this.staVectorSource = new VectorSource({\n        features: []\n      });\n      this.staVectorLayer = new VectorLayer({\n        source: this.staVectorSource\n      });\n      this.map.addLayer(this.staVectorLayer);\n      var tab_stationinfo_data = '<table class=\"table_default\">';\n      tab_stationinfo_data += '<tr class=\"tr_title\"><td>景区代码</td><td>景区名称</td><td>时间</td></tr>';\n      if (this.stationinfo_data_list == null) {\n        return;\n      }\n      var curIndex = 1;\n      for (var i = 0; i < this.stationinfo_data_list.length; i++) {\n        var m = this.stationinfo_data_list[i];\n        console.log(m);\n        var filerSign = mapcommon.is_show_station(m, this.select_sta_type);\n        //console.log(filerSign);\n        if (filerSign) {\n          continue;\n        }\n        var iconColor = null;\n        var trClass = 'tr_content';\n        if (curIndex % 2 == 0) {\n          trClass = 'tr_strongtitle';\n        }\n        var sta_stationinfo_data = '';\n        sta_stationinfo_data = '<tr class=\"' + trClass + '\"><td>' + m.sta_code + '</td><td>' + m.sta_name + '</td><td>' + m.time + '</td></tr>';\n        if (curIndex < 25) {\n          tab_stationinfo_data += sta_stationinfo_data;\n        }\n        var sta01 = mapcommon.buildStationDivMarker(m);\n        //console.log(sta01);\n        this.staVectorSource.addFeature(sta01);\n        curIndex += 1;\n      }\n      tab_stationinfo_data += '</table>';\n      $('#tab_stationinfo_data').html(tab_stationinfo_data);\n    },\n    initL_3_Chart() {\n      //初始化左三的图表\n      // 基于准备好的dom，初始化echarts实例\n      var data_list = [{\n        name: '全国重点景区',\n        value: 10\n      }, {\n        name: '未评级',\n        value: 28\n      }, {\n        name: '特色景区',\n        value: 38\n      }, {\n        name: '3A景区',\n        value: 16\n      }, {\n        name: '4A景区',\n        value: 24\n      }, {\n        name: '5A景区',\n        value: 3\n      }];\n      var namedata = [];\n      for (var i = 0; i < data_list.length; i++) {\n        namedata.push(data_list[i]['name']);\n      }\n      var myChart = echarts.init(document.getElementById('echart_l_3'));\n      var option = {\n        tooltip: {\n          trigger: 'item',\n          formatter: \"{b} : {c} ({d}%)\"\n        },\n        legend: {\n          left: 10,\n          bottom: 0,\n          height: 30,\n          itemWidth: 10,\n          itemHeight: 10,\n          itemGap: 10,\n          textStyle: {\n            color: 'rgba(255,255,255,.6)',\n            fontSize: 12\n          },\n          orient: 'horizontal',\n          data: namedata\n        },\n        calculable: true,\n        series: [{\n          name: ' ',\n          color: ['#4eff01', '#0091ff', '#bbbb13', '#fd8b06', '#f20ab8', '#ff0000', '#c9c862', '#c98b62', '#c962b9', '#7562c9', '#c96262', '#c25775', '#00b7be'],\n          type: 'pie',\n          radius: [30, 70],\n          center: ['50%', '45%'],\n          roseType: 'radius',\n          label: {\n            normal: {\n              show: true\n            },\n            emphasis: {\n              show: true\n            }\n          },\n          lableLine: {\n            normal: {\n              show: true\n            },\n            emphasis: {\n              show: true\n            }\n          },\n          data: data_list\n        }]\n      };\n\n      // 使用刚指定的配置项和数据显示图表。\n      myChart.setOption(option);\n    }\n  },\n  mounted() {\n    this.initMap();\n    this.initTopMenu();\n    this.addForestry(\"city\");\n    this.initData();\n    this.initL_3_Chart();\n  }\n};","map":{"version":3,"names":["$","Map","View","GeoJSON","Vector","VectorSource","VectorLayer","format","MousePosition","ScaleLine","Overlay","echarts","mapcommon","basemap_menu","range_menu","type_menu","name","components","data","map","cur_basemap_select","cur_basemap_type","rangeLayer","select_sta_type","stationinfo_data_list","cur_top_menu_select","staVectorSource","staVectorLayer","cur_select_range_type","methods","initMap","target","layers","view","projection","center","zoom","getBaseMapLayerGroup","addLayer","mousePositionControl","coordinateFormat","coordinate","className","document","getElementById","undefinedHTML","addControl","scaleLineControl","units","popup","element","addOverlay","that","on","event","feature","forEachFeatureAtPixel","pixel","layer","getId","console","log","getElement","setPosition","setVisible","changeBaseMap","type","removeLayer","addForestry","m_url","Date","getTime","m_weight","vectorSource","url","source","style","styleFunction","rendStationInfoData","initTopMenu","event_type","attr","find","hide","show","preventDefault","initData","ajax","dataType","error","alert","success","resp","features","curIndex","i","length","m","filerSign","is_show_station","sta01","buildStationImageMarker","addFeature","tab_stationinfo_data","iconColor","trClass","sta_stationinfo_data","sta_code","sta_name","time","buildStationDivMarker","html","initL_3_Chart","data_list","value","namedata","push","myChart","init","option","tooltip","trigger","formatter","legend","left","bottom","height","itemWidth","itemHeight","itemGap","textStyle","color","fontSize","orient","calculable","series","radius","roseType","label","normal","emphasis","lableLine","setOption","mounted"],"sources":["E:\\Desktop\\scenerymonitor\\src\\views\\monitor.vue"],"sourcesContent":["<template>\r\n    <div class=\"ol_map\" id=\"ol_map\"></div>\r\n    <div style=\"display:none;\">\r\n        <div id=\"popup\" class=\"tooltip_style2\">\r\n            <table width=\"100%\" height=\"100%\">\r\n                <tbody>\r\n                    <tr style=\"text-align: center;\">\r\n                        <td rowspan=\"5\" width=\"60\"><img src=\"/static/images/show/00009.jpg\" width=\"60\" height=\"60\">\r\n                        </td>\r\n                        <td>景区代码</td>\r\n                        <td>00020</td>\r\n                        <td>-</td>\r\n                    </tr>\r\n                    <tr style=\"text-align: center;\">\r\n                        <td>景区人数</td>\r\n                        <td>425</td>\r\n                        <td>-</td>\r\n                    </tr>\r\n                    <tr style=\"text-align: center;\">\r\n                        <td>景区名称</td>\r\n                        <td>黄鹤楼</td>\r\n                        <td>-</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n\r\n    <div id=\"div_xy\"></div>\r\n\r\n    <div class=\"top-menu-bar d-flex j-center a-center\">\r\n        <div class=\"menu-bt-bg\" type=\"baselayer\"><img src=\"@/assets/images/topmenu/top_baselayer.png\" width=\"40\" height=\"40\" /></div>\r\n        <div class=\"menu-bt-bg\" type=\"rangelayer\"><img src=\"@/assets/images/topmenu/top_range.png\" width=\"40\" height=\"40\" /></div>\r\n        <div class=\"menu-bt-bg\" type=\"marker\"><img src=\"@/assets/images/topmenu/top_marker.png\" width=\"40\" height=\"40\" /></div>\r\n        <div class=\"menu-bt-bg\" type=\"countinfo\"><img src=\"@/assets/images/topmenu/top_count.png\" width=\"40\" height=\"40\" /></div>\r\n    </div>\r\n\r\n    <basemap_menu></basemap_menu>\r\n    <range_menu></range_menu>\r\n    <type_menu></type_menu>\r\n\r\n\r\n    <!--所有景点参数弹出框-->\r\n    <div class=\"show_windows_strong_600\" id=\"m_all_strong_info\" style=\"display: block; height: 800px; width: 600px;\">\r\n        <a style=\"float: right\"><i class=\"show_windows_title_close\" id=\"m_all_strong_close\"></i></a>\r\n        <div class=\"show_windows_title_600\">\r\n            <p>景点热度数据（每隔1h更新）</p>\r\n        </div>\r\n        <div class=\"show_windows_content_padding\" id=\"tab_stationinfo_data\">\r\n        <table class=\"table_default\">\r\n            <thead>\r\n                <tr class=\"tr_title\">\r\n                    <td>景区代码</td>\r\n                    <td>景区名称</td>\r\n                    <td>景区人数</td>\r\n                    <td>时间</td>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr class=\"tr_content\">\r\n              <td>WLL07</td>\r\n              <td>武汉黄鹤楼</td>\r\n              <td>306人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_strongtitle\">\r\n              <td>WLL08</td>\r\n              <td>江汉路步行街</td>\r\n              <td>255人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_content\">\r\n              <td>WLL09</td>\r\n              <td>武汉东湖风景区</td>\r\n              <td>230人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_strongtitle\">\r\n              <td>WLL10</td>\r\n              <td>武汉大学</td>\r\n              <td>186人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_content\">\r\n              <td>WLL11</td>\r\n              <td>汉口江滩</td>\r\n              <td>162人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_strongtitle\">\r\n              <td>WLL12</td>\r\n              <td>武汉博物馆</td>\r\n              <td>148人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_content\">\r\n              <td>WLL13</td>\r\n              <td>汉正街</td>\r\n              <td>146人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_strongtitle\">\r\n              <td>WLL14</td>\r\n              <td>武汉动物园</td>\r\n              <td>146人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_content\">\r\n              <td>WLL15</td>\r\n              <td>长江大桥</td>\r\n              <td>144人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_strongtitle\">\r\n              <td>WLL16</td>\r\n              <td>楚河汉街</td>\r\n              <td>130人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_content\">\r\n              <td>WLL17</td>\r\n              <td>宝通寺</td>\r\n              <td>112人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_strongtitle\">\r\n              <td>WLL18</td>\r\n              <td>武汉园博园</td>\r\n              <td>104人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_content\">\r\n              <td>WLL19</td>\r\n              <td>武汉欢乐谷</td>\r\n              <td>102人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_strongtitle\">\r\n              <td>WLL20</td>\r\n              <td>武汉天地</td>\r\n              <td>100人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_content\">\r\n              <td>WLL21</td>\r\n              <td>武汉植物园</td>\r\n              <td>96人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_strongtitle\">\r\n              <td>WLL22</td>\r\n              <td>解放公园</td>\r\n              <td>83人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_content\">\r\n              <td>WLL21</td>\r\n              <td>武汉归元禅寺</td>\r\n              <td>76人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_strongtitle\">\r\n              <td>WLL22</td>\r\n              <td>玫瑰街</td>\r\n              <td>75人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_content\">\r\n              <td>WLL21</td>\r\n              <td>户部巷</td>\r\n              <td>66人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_strongtitle\">\r\n              <td>WLL22</td>\r\n              <td>昙华林</td>\r\n              <td>56人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_content\">\r\n              <td>WLL21</td>\r\n              <td>紫薇花海</td>\r\n              <td>45人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n            <tr class=\"tr_strongtitle\">\r\n              <td>WLL22</td>\r\n              <td>玫瑰街</td>\r\n              <td>75人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>            <tr class=\"tr_content\">\r\n              <td>WLL21</td>\r\n              <td>逸夫博物馆</td>\r\n              <td>23人</td>\r\n              <td>2024-04-28 15:00:00</td>\r\n            </tr>\r\n                <!-- 假设下面还有更多类似的行 -->\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n\r\n    </div>\r\n\r\n    <!--点击显示可视化弹出框-->\r\n    <div class=\"show_windows_600\" id=\"m_select_sta_strong\" style=\"display: block; height: 680px;\">\r\n        <a style=\"float: right\"><i class=\"show_windows_title_close\" id=\"m_select_sta_strong_close\"></i></a>\r\n        <div class=\"show_windows_title\">\r\n            <p>类型统计</p>\r\n        </div>\r\n        <div class=\"show_windows_content_padding\">\r\n            <div class=\"count_info_content_line d-flex j-center a-center\">\r\n                <div class=\"count_info_content count_info_content_bg1\">\r\n                    <div class=\" d-flex j-center a-end\" style=\"width: 100%; height: 20%;\">\r\n\r\n                    </div>\r\n                    <div class=\" d-flex j-center a-end\" style=\"width: 100%; height: 78%;\">\r\n                        <b style=\"color: #04d8db;\" id=\"e_count\">90个</b>\r\n                    </div>\r\n                </div>\r\n                <div class=\"count_info_content count_info_content_bg2\">\r\n                    <div class=\" d-flex j-center a-end\" style=\"width: 100%; height: 20%;\">\r\n\r\n                    </div>\r\n                    <div class=\" d-flex j-center a-end\" style=\"width: 100%; height: 78%;\">\r\n                        &nbsp;<b style=\"color: #04d8db;\" id=\"e_date_len\">35个</b>\r\n                    </div>\r\n                </div>\r\n                <div class=\"count_info_content count_info_content_bg3\">\r\n                    <div class=\" d-flex j-center a-end\" style=\"width: 100%; height: 20%;\">\r\n                    </div>\r\n                    <div class=\" d-flex j-center a-end\" style=\"width: 100%; height: 78%;\">\r\n                        <b style=\"color: #04d8db;\" id=\"e_rate\">15个</b>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n        <div class=\"show_windows_title margin-top-5\">\r\n            <p>相关数据</p>\r\n        </div>\r\n        <div class=\"show_windows_content_padding\" id=\"e_table\">\r\n            <table class=\"table_default\">\r\n                <tr class=\"tr_title\">\r\n                    <td>景区评级</td>\r\n                    <td>景区数量</td>\r\n                    <td>比例(%)</td>\r\n                </tr>\r\n                <tr class=\"tr_content\" style=\"color: #4eff01;\">\r\n                    <td>\r\n                        <p id=\"sta_name\">未评级</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"sta_type\">43</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"site_level\">13.16%</p>\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"tr_title\" style=\"color: #0091ff;\">\r\n                    <td>\r\n                        <p id=\"sta_name\">特色景区</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"sta_type\">54</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"site_level\">26.31%</p>\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"tr_content\" style=\"color: #bbbb13;\">\r\n                    <td>\r\n                        <p id=\"sta_name\">3A景区</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"sta_type\">13</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"site_level\">39.47%</p>\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"tr_title\" style=\"color: #fd8b06;\">\r\n                    <td>\r\n                        <p id=\"sta_name\">4A景区</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"sta_type\">12</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"site_level\">15.79%</p>\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"tr_content\" style=\"color: #f20ab8;\">\r\n                    <td>\r\n                        <p id=\"sta_name\">5A景区</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"sta_type\">8</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"site_level\">3.95%</p>\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"tr_title\" style=\"color: #ff0000;\">\r\n                    <td>\r\n                        <p id=\"sta_name\">全国重点景区</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"sta_type\">10</p>\r\n                    </td>\r\n                    <td>\r\n                        <p id=\"site_level\">1.32%</p>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n        <div class=\"show_windows_title margin-top-5\">\r\n            <p>数据统计</p>\r\n        </div>\r\n        <div class=\"show_windows_content_padding\">\r\n            <div id=\"echart_l_3\" style=\"width: 100%; height: 300px;\"></div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from 'jquery';\r\nimport 'ol/ol.css';\r\nimport Map from 'ol/Map.js';\r\nimport View from 'ol/View.js';\r\nimport GeoJSON from 'ol/format/GeoJSON.js';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport { Vector as VectorLayer } from \"ol/layer\";\r\nimport { format } from 'ol/coordinate';\r\nimport MousePosition from \"ol/control/MousePosition.js\";\r\nimport { ScaleLine } from 'ol/control.js';\r\nimport Overlay from 'ol/Overlay.js';\r\nimport * as echarts from \"echarts\";\r\n\r\nimport mapcommon from '@/js/mapcommon';\r\nimport basemap_menu from '@/components/topmenu/basemap_menu.vue';\r\nimport range_menu from '@/components/topmenu/range_menu.vue';\r\nimport type_menu from '@/components/topmenu/type_menu.vue';\r\n\r\nexport default {\r\n    name: 'home',\r\n    components: {\r\n        basemap_menu,\r\n        range_menu,\r\n        type_menu,\r\n    },\r\n    data() {\r\n        return {\r\n            map: null,  //地图对象\r\n            cur_basemap_select: null, //当前选择的底图图层\r\n            cur_basemap_type: \"esri_worldimagery\", //当前选择的底图图层名称\r\n            rangeLayer: null, //边界图层\r\n            select_sta_type: \"all\", //当前选择的显示景点类型\r\n\r\n            stationinfo_data_list: null,  //景点数据列表\r\n\r\n            cur_top_menu_select: null,  //当前顶部选择的菜单\r\n            staVectorSource: null,  //景点图标数组\r\n            staVectorLayer: null, //景点图标图层\r\n            cur_select_range_type: \"all\",\r\n        }\r\n    },\r\n    methods: {\r\n        initMap() {  //初始化地图\r\n            this.map = new Map({\r\n                target: 'ol_map',\r\n                layers: [],\r\n                view: new View({\r\n                    projection: \"EPSG:4326\",\r\n                    center: [114.365248, 30.53786],\r\n                    zoom: 10,\r\n                }),\r\n            });\r\n            this.cur_basemap_select = mapcommon.getBaseMapLayerGroup(this.cur_basemap_type);\r\n            this.map.addLayer(this.cur_basemap_select);\r\n\r\n            //鼠标获取坐标控件\r\n            const mousePositionControl = new MousePosition({\r\n                coordinateFormat: function (coordinate) {\r\n                    return format(coordinate, '经纬度:{x},{y}', 4);\r\n                },\r\n                projection: 'EPSG:4326',\r\n                className: 'custom-mouse-position',\r\n                target: document.getElementById('div_xy'),\r\n                undefinedHTML: ' '\r\n            });\r\n            this.map.addControl(mousePositionControl);\r\n\r\n            //实例化比例尺控件（ScaleLine）\r\n            var scaleLineControl = new ScaleLine({\r\n                //设置比例尺单位，degrees、imperial、us、nautical、metric（度量单位）\r\n                units: \"metric\"\r\n            });\r\n            this.map.addControl(scaleLineControl);\r\n\r\n            // 用户点击地图就会弹出来的窗口（弹窗）\r\n            const popup = new Overlay({\r\n                element: document.getElementById('popup')\r\n            });\r\n            this.map.addOverlay(popup);\r\n\r\n            // 为地图绑定click事件，使用户点击地图就能在对应处弹窗\r\n            let that = this;\r\n            that.map.on('click', function (event) {\r\n                let feature = that.map.forEachFeatureAtPixel(event.pixel, function (feature, layer) {\r\n                    return feature;\r\n                })\r\n                if (feature && feature.getId()) {\r\n                    console.log(feature.getId());\r\n                    let element = popup.getElement();       // 获取充当弹窗的DOM元素\r\n                    let coordinate = event.coordinate;      // 获取鼠标点击处的坐标\r\n                    popup.setPosition(coordinate);          // 将弹窗位置设置为鼠标点击处\r\n                    //element.innerHTML = '<p>The location you clicked was:</p><code>1234</code>';\r\n                } else {\r\n                    popup.setVisible(false);\r\n                }\r\n\r\n            });\r\n        },\r\n        changeBaseMap(type) { //更改底图图层\r\n            console.log(type);\r\n            if(type != \"\"){\r\n                this.cur_basemap_type = type;\r\n            }\r\n            if (this.cur_basemap_select != null) {\r\n                this.map.removeLayer(this.cur_basemap_select);\r\n            }\r\n            this.cur_basemap_select = mapcommon.getBaseMapLayerGroup(this.cur_basemap_type);\r\n            this.map.addLayer(this.cur_basemap_select);\r\n            this.addForestry(this.cur_select_range_type);\r\n\r\n        },\r\n        addForestry(type) { //添加边界\r\n            if(type != \"\"){\r\n                this.cur_select_range_type = type;\r\n            }\r\n            var m_url = \"/static/data/map/city.json?t=\" + new Date().getTime();\r\n            var m_weight = 3;\r\n            if (this.cur_select_range_type == 'city') {\r\n                m_url = \"/static/data/map/city.json?t=\" + new Date().getTime();\r\n                m_weight = 3;\r\n            } else if (this.cur_select_range_type == 'country') {\r\n                m_url = \"/static/data/map/region.json?t=\" + new Date().getTime();\r\n                m_weight = 2;\r\n            } else {\r\n                m_url = \"/static/data/map/province.json?t=\" + new Date().getTime();\r\n                m_weight = 1;\r\n            }\r\n\r\n            if (this.rangeLayer != null || this.rangeLayer == \"undefined\") {\r\n                //移除已有矢量图层\r\n                this.map.removeLayer(this.rangeLayer);\r\n            }\r\n            var vectorSource = new VectorSource({\r\n                url: m_url,\r\n                format: new GeoJSON()\r\n            });\r\n            this.rangeLayer = new VectorLayer({\r\n                //矢量数据源\r\n                source: vectorSource,\r\n                //样式设置\r\n                style: mapcommon.styleFunction\r\n            });\r\n\r\n            //将矢量图层加载到地图中\r\n            this.map.addLayer(this.rangeLayer);\r\n\r\n            this.rendStationInfoData(this.select_sta_type);\r\n\r\n        },\r\n        initTopMenu() {  //初始化顶部菜单\r\n            let that = this;\r\n            $(document).on('click', '.top-menu-bar div', function (event) {\r\n                var event_type = event.type;\r\n                var type = $(this).attr('type');\r\n                that.cur_top_menu_select = type;\r\n                $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\r\n                $(this).attr('class', 'menu-bt-bg-s');\r\n\r\n                if (type == 'baselayer') {\r\n                    $(\"#m_select_sta_strong\").hide();\r\n                    $(\"#m_select_range\").hide();\r\n                    $(\"#m_countinfo\").hide();\r\n                    $(\"#m_selectmarker\").hide();\r\n                    $(\"#m_baselayer\").show();\r\n                } else if (type == 'countinfo') {\r\n                    $(\"#m_select_range\").hide();\r\n                    $(\"#m_baselayer\").hide();\r\n                    $(\"#m_selectmarker\").hide();\r\n                    $(\"#m_all_strong_info\").show();\r\n                    $(\"#m_select_sta_strong\").show();\r\n                } else if (type == 'marker') {\r\n                    $(\"#m_select_sta_strong\").hide();\r\n                    $(\"#m_select_range\").hide();\r\n                    $(\"#m_countinfo\").hide();\r\n                    $(\"#m_baselayer\").hide();\r\n                    $(\"#m_selectmarker\").show();\r\n                } else if (type == 'rangelayer') {\r\n                    $(\"#m_select_sta_strong\").hide();\r\n                    $(\"#m_select_range\").show();\r\n                    $(\"#m_countinfo\").hide();\r\n                    $(\"#m_baselayer\").hide();\r\n                    $(\"#m_selectmarker\").hide();\r\n                }\r\n            });\r\n\r\n            //弹出窗口的关闭事件\r\n            $(document).on(\"click\", \"#m_all_strong_close\", function (event) {\r\n                event.preventDefault();\r\n                $(\"#m_all_strong_info\").hide();\r\n                $(\".top-menu-bar\").find(\"div\").attr(\"class\", \"menu-bt-bg\");\r\n            });\r\n        },\r\n\r\n        initData() {  //初始化数据\r\n        let that = this;\r\n        $.ajax({\r\n          type: \"get\",\r\n          url: \"/static/data/stationinfo.json?time=\" + new Date().getTime(),\r\n          dataType: \"json\",\r\n          error: function () {\r\n            alert(\"获取数据失败！\");\r\n          },\r\n          success: function (resp) {\r\n\r\n            console.log(resp);\r\n\r\n            that.stationinfo_data_list = resp.data;\r\n            console.log(that.stationinfo_data_list);\r\n            that.select_sta_type = \"all\";\r\n            if (that.staVectorLayer != null) {\r\n              that.map.removeLayer(that.staVectorLayer);\r\n            }\r\n            that.staVectorSource = new VectorSource({\r\n              features: []\r\n            });\r\n            that.staVectorLayer = new VectorLayer({\r\n              source: that.staVectorSource\r\n            });\r\n            that.map.addLayer(that.staVectorLayer);\r\n\r\n\r\n            var curIndex = 1;\r\n            for (var i = 0; i < that.stationinfo_data_list.length; i++) {\r\n              var m = that.stationinfo_data_list[i];\r\n              console.log(m);\r\n              var filerSign = mapcommon.is_show_station(m, that.select_sta_type);\r\n              if (filerSign) {\r\n                continue;\r\n              }\r\n              var sta01 = mapcommon.buildStationImageMarker(m);\r\n              that.staVectorSource.addFeature(sta01);\r\n              curIndex += 1;\r\n            }\r\n          }\r\n        });\r\n      },\r\n\r\n        rendStationInfoData(type) {  //显示各景点\r\n            this.select_sta_type = type;\r\n            if (this.staVectorLayer != null) {\r\n                this.map.removeLayer(this.staVectorLayer);\r\n            }\r\n            this.staVectorSource = new VectorSource({\r\n                features: []\r\n            });\r\n            this.staVectorLayer = new VectorLayer({\r\n                source: this.staVectorSource\r\n            });\r\n            this.map.addLayer(this.staVectorLayer);\r\n\r\n            var tab_stationinfo_data = '<table class=\"table_default\">';\r\n            tab_stationinfo_data += '<tr class=\"tr_title\"><td>景区代码</td><td>景区名称</td><td>时间</td></tr>'\r\n\r\n            if(this.stationinfo_data_list == null){\r\n                return\r\n            }\r\n\r\n            var curIndex = 1;\r\n\r\n            for (var i = 0; i < this.stationinfo_data_list.length; i++) {\r\n                var m = this.stationinfo_data_list[i];\r\n                console.log(m);\r\n                var filerSign = mapcommon.is_show_station(m, this.select_sta_type);\r\n                //console.log(filerSign);\r\n                if (filerSign) {\r\n                    continue;\r\n                }\r\n\r\n                var iconColor = null;\r\n\r\n                var trClass = 'tr_content'\r\n                if (curIndex % 2 == 0) {\r\n                    trClass = 'tr_strongtitle'\r\n                }\r\n\r\n                var sta_stationinfo_data = '';\r\n                sta_stationinfo_data = '<tr class=\"' + trClass + '\"><td>' + m.sta_code + '</td><td>' + m.sta_name + '</td><td>' +  m.time + '</td></tr>'\r\n\r\n                if (curIndex < 25) {\r\n                    tab_stationinfo_data += sta_stationinfo_data;\r\n                }\r\n\r\n                var sta01 = mapcommon.buildStationDivMarker(m);\r\n                //console.log(sta01);\r\n                this.staVectorSource.addFeature(sta01);\r\n\r\n                curIndex += 1;\r\n            }\r\n\r\n            tab_stationinfo_data += '</table>';\r\n            $('#tab_stationinfo_data').html(tab_stationinfo_data);\r\n        },\r\n\r\n\r\n        initL_3_Chart() {  //初始化左三的图表\r\n            // 基于准备好的dom，初始化echarts实例\r\n            var data_list = [\r\n                { name: '全国重点景区', value: 10 },\r\n                { name: '未评级', value: 28 },\r\n                { name: '特色景区', value: 38 },\r\n\r\n                { name: '3A景区', value: 16 },\r\n                { name: '4A景区', value: 24 },\r\n                { name: '5A景区', value: 3 },\r\n            ];\r\n            var namedata = [];\r\n            for (var i = 0; i < data_list.length; i++) {\r\n                namedata.push(data_list[i]['name']);\r\n            }\r\n            var myChart = echarts.init(document.getElementById('echart_l_3'));\r\n            var option = {\r\n                tooltip: {\r\n                    trigger: 'item',\r\n                    formatter: \"{b} : {c} ({d}%)\"\r\n                },\r\n                legend: {\r\n                    left: 10,\r\n                    bottom: 0,\r\n                    height: 30,\r\n                    itemWidth: 10,\r\n                    itemHeight: 10,\r\n                    itemGap: 10,\r\n                    textStyle: {\r\n                        color: 'rgba(255,255,255,.6)',\r\n                        fontSize: 12\r\n                    },\r\n                    orient: 'horizontal',\r\n                    data: namedata\r\n                },\r\n                calculable: true,\r\n                series: [\r\n                    {\r\n                        name: ' ',\r\n                        color: ['#4eff01', '#0091ff', '#bbbb13', '#fd8b06', '#f20ab8', '#ff0000', '#c9c862', '#c98b62', '#c962b9', '#7562c9', '#c96262', '#c25775', '#00b7be'],\r\n                        type: 'pie',\r\n                        radius: [30, 70],\r\n                        center: ['50%', '45%'],\r\n                        roseType: 'radius',\r\n                        label: {\r\n                            normal: {\r\n                                show: true\r\n                            },\r\n                            emphasis: {\r\n                                show: true\r\n                            }\r\n                        },\r\n\r\n                        lableLine: {\r\n                            normal: {\r\n                                show: true\r\n                            },\r\n                            emphasis: {\r\n                                show: true\r\n                            }\r\n                        },\r\n\r\n                        data: data_list\r\n                    },\r\n                ]\r\n            };\r\n\r\n            // 使用刚指定的配置项和数据显示图表。\r\n            myChart.setOption(option);\r\n        }\r\n    },\r\n    mounted() {\r\n        this.initMap();\r\n        this.initTopMenu();\r\n        this.addForestry(\"city\");\r\n        this.initData();\r\n        this.initL_3_Chart();\r\n    }\r\n}\r\n\r\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}