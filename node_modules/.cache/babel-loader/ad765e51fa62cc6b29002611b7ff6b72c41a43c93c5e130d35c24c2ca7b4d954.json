{"ast":null,"code":"import $ from \"jquery\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      formData: {\n        net_code: '',\n        sta_code: '',\n        sta_type: '',\n        // 修改：添加默认值\n        dev_type: '',\n        dev_ip: '',\n        out_port: null,\n        in_port: null,\n        sta_lon: null,\n        sta_lat: null,\n        sta_name: '',\n        site_level: '',\n        sta_address: '',\n        site_pic_upload: null,\n        site_range: '',\n        site_adress: '',\n        site_instroduce: ''\n      }\n    };\n  },\n  methods: {\n    initShowWindow() {\n      $(document).on(\"click\", \"#m_addsite_close\", event => {\n        event.preventDefault();\n        $(\"#m_addsite\").hide();\n      });\n    },\n    handleFileUpload(event) {\n      this.formData.site_pic_upload = event.target.files[0];\n    },\n    submitForm() {\n      const formData = new FormData();\n      Object.keys(this.formData).forEach(key => {\n        formData.append(key, this.formData[key]);\n      });\n      axios.post('http://localhost:8080/add_site', formData).then(response => {\n        console.log(response.data);\n        alert('数据添加成功');\n      }).catch(error => {\n        console.error(error);\n        alert('请求失败: ' + error.message);\n      });\n    }\n  },\n  mounted() {\n    this.initShowWindow();\n  }\n};","map":{"version":3,"names":["$","axios","data","formData","net_code","sta_code","sta_type","dev_type","dev_ip","out_port","in_port","sta_lon","sta_lat","sta_name","site_level","sta_address","site_pic_upload","site_range","site_adress","site_instroduce","methods","initShowWindow","document","on","event","preventDefault","hide","handleFileUpload","target","files","submitForm","FormData","Object","keys","forEach","key","append","post","then","response","console","log","alert","catch","error","message","mounted"],"sources":["E:\\Desktop\\scenerymonitor\\src\\components\\topmenu\\add_site.vue"],"sourcesContent":["<template>\r\n  <div class=\"show_windows1\" id=\"m_addsite\" style=\"display: none; height: 300px;\">\r\n    <a style=\"float: right\"><i class=\"show_windows_title_close\" id=\"m_addsite_close\"></i></a>\r\n    <div class=\"show_windows_title\" >\r\n      <p>填写站点信息</p>\r\n    </div>\r\n    <div class=\"form_content\">\r\n      <form @submit.prevent=\"submitForm\">\r\n        <div>\r\n          <label for=\"net_code\">Net Code:</label>\r\n          <input class=\"input-field\" type=\"text\" id=\"net_code_upload\" v-model=\"formData.net_code\">\r\n        </div>\r\n        <div>\r\n          <label for=\"sta_code\">Sta Code:</label>\r\n          <input type=\"text\" class=\"input-field\" id=\"sta_code_upload\" v-model=\"formData.sta_code\">\r\n        </div>\r\n        <div>\r\n          <label for=\"sta_type\">Sta Type:</label>\r\n          <input type=\"radio\" id=\"sta_type1_upload\" value=\"景区\" v-model=\"formData.sta_type\"> 景区\r\n          <input type=\"radio\" id=\"sta_type2_upload\" value=\"文保\" v-model=\"formData.sta_type\"> 文保\r\n        </div>\r\n        <div>\r\n          <label for=\"dev_type\">Dev Type:</label>\r\n          <input type=\"text\" class=\"input-field\" id=\"dev_type_upload\" v-model=\"formData.dev_type\">\r\n        </div>\r\n        <div>\r\n          <label for=\"dev_ip\">Dev IP:</label>\r\n          <input type=\"text\" class=\"input-field\" id=\"dev_ip_upload\" v-model=\"formData.dev_ip\">\r\n        </div>\r\n        <div>\r\n          <label for=\"out_port\">Out Port:</label>\r\n          <input type=\"number\" class=\"input-field\" id=\"out_port_upload\" v-model=\"formData.out_port\">\r\n        </div>\r\n        <div>\r\n          <label for=\"in_port\">In Port:</label>\r\n          <input type=\"number\" class=\"input-field\" id=\"in_port_upload\" v-model=\"formData.in_port\">\r\n        </div>\r\n        <div>\r\n          <label for=\"sta_lon\">Sta Lon:</label>\r\n          <input type=\"number\" class=\"input-field\" id=\"sta_lon_upload\" step=\"any\" v-model=\"formData.sta_lon\">\r\n        </div>\r\n        <div>\r\n          <label for=\"sta_lat\">Sta Lat:</label>\r\n          <input type=\"number\" class=\"input-field\" id=\"sta_lat_upload\" step=\"any\" v-model=\"formData.sta_lat\">\r\n        </div>\r\n        <div>\r\n          <label for=\"sta_name\">Sta Name:</label>\r\n          <input type=\"text\" class=\"input-field\" id=\"sta_name_upload\" v-model=\"formData.sta_name\">\r\n        </div>\r\n        <div>\r\n          <label for=\"site_level\">Site Level:</label>\r\n          <input type=\"text\" class=\"input-field\" id=\"site_level_upload\" v-model=\"formData.site_level\">\r\n        </div>\r\n        <div>\r\n          <label for=\"sta_address\">Sta Address:</label>\r\n          <input type=\"text\" class=\"input-field\" id=\"sta_address_upload\" v-model=\"formData.sta_address\">\r\n        </div>\r\n        <div>\r\n          <label for=\"site_pic\">Site Picture:</label>\r\n          <input type=\"file\" id=\"site_pic_upload\" @change=\"handleFileUpload\">\r\n        </div>\r\n        <div>\r\n          <label for=\"site_range\">Site Range:</label>\r\n          <input type=\"text\" class=\"input-field\" id=\"site_range_upload\" v-model=\"formData.site_range\">\r\n        </div>\r\n        <div>\r\n          <label for=\"site_adress\">Site Address:</label>\r\n          <input type=\"text\" class=\"input-field\" id=\"site_address_upload\" v-model=\"formData.site_adress\">\r\n        </div>\r\n        <div>\r\n          <label for=\"site_instroduce\">Site Introduce:</label>\r\n          <textarea id=\"site_introduce_upload\" class=\"input-field1\" v-model=\"formData.site_instroduce\"></textarea>\r\n        </div>\r\n        <button class=\"input-field\" type=\"submit\">提交</button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\";\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      formData: {\r\n        net_code: '',\r\n        sta_code: '',\r\n        sta_type: '', // 修改：添加默认值\r\n        dev_type: '',\r\n        dev_ip: '',\r\n        out_port: null,\r\n        in_port: null,\r\n        sta_lon: null,\r\n        sta_lat: null,\r\n        sta_name: '',\r\n        site_level: '',\r\n        sta_address: '',\r\n        site_pic_upload: null,\r\n        site_range: '',\r\n        site_adress: '',\r\n        site_instroduce: ''\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    initShowWindow() {\r\n      $(document).on(\"click\", \"#m_addsite_close\", (event) => {\r\n        event.preventDefault();\r\n        $(\"#m_addsite\").hide();\r\n      });\r\n    },\r\n    handleFileUpload(event) {\r\n      this.formData.site_pic_upload = event.target.files[0];\r\n    },\r\n    submitForm() {\r\n      const formData = new FormData();\r\n      Object.keys(this.formData).forEach(key => {\r\n        formData.append(key, this.formData[key]);\r\n      });\r\n\r\n      axios.post('http://localhost:8080/add_site', formData)\r\n          .then(response => {\r\n            console.log(response.data);\r\n            alert('数据添加成功');\r\n          })\r\n          .catch(error => {\r\n            console.error(error);\r\n            alert('请求失败: ' + error.message);\r\n          });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initShowWindow();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":"AAgFA,OAAOA,CAAA,MAAO,QAAQ;AACtB,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE;QACRC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE,EAAE;QAAE;QACdC,QAAQ,EAAE,EAAE;QACZC,MAAM,EAAE,EAAE;QACVC,QAAQ,EAAE,IAAI;QACdC,OAAO,EAAE,IAAI;QACbC,OAAO,EAAE,IAAI;QACbC,OAAO,EAAE,IAAI;QACbC,QAAQ,EAAE,EAAE;QACZC,UAAU,EAAE,EAAE;QACdC,WAAW,EAAE,EAAE;QACfC,eAAe,EAAE,IAAI;QACrBC,UAAU,EAAE,EAAE;QACdC,WAAW,EAAE,EAAE;QACfC,eAAe,EAAE;MACnB;IACF,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,cAAcA,CAAA,EAAG;MACfrB,CAAC,CAACsB,QAAQ,CAAC,CAACC,EAAE,CAAC,OAAO,EAAE,kBAAkB,EAAGC,KAAK,IAAK;QACrDA,KAAK,CAACC,cAAc,CAAC,CAAC;QACtBzB,CAAC,CAAC,YAAY,CAAC,CAAC0B,IAAI,CAAC,CAAC;MACxB,CAAC,CAAC;IACJ,CAAC;IACDC,gBAAgBA,CAACH,KAAK,EAAE;MACtB,IAAI,CAACrB,QAAQ,CAACa,eAAc,GAAIQ,KAAK,CAACI,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACvD,CAAC;IACDC,UAAUA,CAAA,EAAG;MACX,MAAM3B,QAAO,GAAI,IAAI4B,QAAQ,CAAC,CAAC;MAC/BC,MAAM,CAACC,IAAI,CAAC,IAAI,CAAC9B,QAAQ,CAAC,CAAC+B,OAAO,CAACC,GAAE,IAAK;QACxChC,QAAQ,CAACiC,MAAM,CAACD,GAAG,EAAE,IAAI,CAAChC,QAAQ,CAACgC,GAAG,CAAC,CAAC;MAC1C,CAAC,CAAC;MAEFlC,KAAK,CAACoC,IAAI,CAAC,gCAAgC,EAAElC,QAAQ,EAChDmC,IAAI,CAACC,QAAO,IAAK;QAChBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACrC,IAAI,CAAC;QAC1BwC,KAAK,CAAC,QAAQ,CAAC;MACjB,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;QACdJ,OAAO,CAACI,KAAK,CAACA,KAAK,CAAC;QACpBF,KAAK,CAAC,QAAO,GAAIE,KAAK,CAACC,OAAO,CAAC;MACjC,CAAC,CAAC;IACR;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACzB,cAAc,CAAC,CAAC;EACvB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}