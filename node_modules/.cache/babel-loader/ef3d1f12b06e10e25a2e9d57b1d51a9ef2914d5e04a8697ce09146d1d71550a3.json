{"ast":null,"code":"import { ArrayIteratorPrototype, ArrayIteratorPrototypeNext, ArrayPrototypeSymbolIterator, GeneratorPrototypeNext, IteratorPrototype, NativeArrayPrototypeSymbolIterator, NativeWeakMap, ObjectCreate, ObjectDefineProperty, ReflectGetOwnPropertyDescriptor, ReflectOwnKeys, SymbolIterator, WeakMapPrototypeGet, WeakMapPrototypeSet } from \"./primordials.mjs\";\n\n/** @type {WeakMap<{}, IterableIterator<any>>} */\nconst arrayIterators = new NativeWeakMap();\nconst SafeIteratorPrototype = ObjectCreate(null, {\n  next: {\n    value: function next() {\n      const arrayIterator = WeakMapPrototypeGet(arrayIterators, this);\n      return ArrayIteratorPrototypeNext(arrayIterator);\n    }\n  },\n  [SymbolIterator]: {\n    value: function values() {\n      return this;\n    }\n  }\n});\n\n/**\n * Wrap the Array around the SafeIterator If Array.prototype [@@iterator] has been modified\n * @type {<T>(array: T[]) => Iterable<T>}\n */\nexport function safeIfNeeded(array) {\n  if (array[SymbolIterator] === NativeArrayPrototypeSymbolIterator && ArrayIteratorPrototype.next === ArrayIteratorPrototypeNext) {\n    return array;\n  }\n  const safe = ObjectCreate(SafeIteratorPrototype);\n  WeakMapPrototypeSet(arrayIterators, safe, ArrayPrototypeSymbolIterator(array));\n  return safe;\n}\n\n/** @type {WeakMap<{}, Generator<any>>} */\nconst generators = new NativeWeakMap();\n\n/** @see https://tc39.es/ecma262/#sec-%arrayiteratorprototype%-object */\nconst DummyArrayIteratorPrototype = ObjectCreate(IteratorPrototype, {\n  next: {\n    value: function next() {\n      const generator = WeakMapPrototypeGet(generators, this);\n      return GeneratorPrototypeNext(generator);\n    },\n    writable: true,\n    configurable: true\n  }\n});\nfor (const key of ReflectOwnKeys(ArrayIteratorPrototype)) {\n  // next method has already defined\n  if (key === \"next\") {\n    continue;\n  }\n\n  // Copy ArrayIteratorPrototype descriptors to DummyArrayIteratorPrototype\n  ObjectDefineProperty(DummyArrayIteratorPrototype, key, ReflectGetOwnPropertyDescriptor(ArrayIteratorPrototype, key));\n}\n\n/**\n * Wrap the Generator around the dummy ArrayIterator\n * @type {<T>(generator: Generator<T>) => IterableIterator<T>}\n */\nexport function wrap(generator) {\n  const dummy = ObjectCreate(DummyArrayIteratorPrototype);\n  WeakMapPrototypeSet(generators, dummy, generator);\n  return dummy;\n}","map":{"version":3,"names":["ArrayIteratorPrototype","ArrayIteratorPrototypeNext","ArrayPrototypeSymbolIterator","GeneratorPrototypeNext","IteratorPrototype","NativeArrayPrototypeSymbolIterator","NativeWeakMap","ObjectCreate","ObjectDefineProperty","ReflectGetOwnPropertyDescriptor","ReflectOwnKeys","SymbolIterator","WeakMapPrototypeGet","WeakMapPrototypeSet","arrayIterators","SafeIteratorPrototype","next","value","arrayIterator","values","safeIfNeeded","array","safe","generators","DummyArrayIteratorPrototype","generator","writable","configurable","key","wrap","dummy"],"sources":["E:/Desktop/SceneryPlatform_v3.0_LTS/node_modules/@petamoriken/float16/src/_util/arrayIterator.mjs"],"sourcesContent":["import {\n  ArrayIteratorPrototype,\n  ArrayIteratorPrototypeNext,\n  ArrayPrototypeSymbolIterator,\n  GeneratorPrototypeNext,\n  IteratorPrototype,\n  NativeArrayPrototypeSymbolIterator,\n  NativeWeakMap,\n  ObjectCreate,\n  ObjectDefineProperty,\n  ReflectGetOwnPropertyDescriptor,\n  ReflectOwnKeys,\n  SymbolIterator,\n  WeakMapPrototypeGet,\n  WeakMapPrototypeSet,\n} from \"./primordials.mjs\";\n\n/** @type {WeakMap<{}, IterableIterator<any>>} */\nconst arrayIterators = new NativeWeakMap();\n\nconst SafeIteratorPrototype = ObjectCreate(null, {\n  next: {\n    value: function next() {\n      const arrayIterator = WeakMapPrototypeGet(arrayIterators, this);\n      return ArrayIteratorPrototypeNext(arrayIterator);\n    },\n  },\n\n  [SymbolIterator]: {\n    value: function values() {\n      return this;\n    },\n  },\n});\n\n/**\n * Wrap the Array around the SafeIterator If Array.prototype [@@iterator] has been modified\n * @type {<T>(array: T[]) => Iterable<T>}\n */\nexport function safeIfNeeded(array) {\n  if (\n    array[SymbolIterator] === NativeArrayPrototypeSymbolIterator &&\n    ArrayIteratorPrototype.next === ArrayIteratorPrototypeNext\n  ) {\n    return array;\n  }\n\n  const safe = ObjectCreate(SafeIteratorPrototype);\n  WeakMapPrototypeSet(arrayIterators, safe, ArrayPrototypeSymbolIterator(array));\n  return safe;\n}\n\n/** @type {WeakMap<{}, Generator<any>>} */\nconst generators = new NativeWeakMap();\n\n/** @see https://tc39.es/ecma262/#sec-%arrayiteratorprototype%-object */\nconst DummyArrayIteratorPrototype = ObjectCreate(IteratorPrototype, {\n  next: {\n    value: function next() {\n      const generator = WeakMapPrototypeGet(generators, this);\n      return GeneratorPrototypeNext(generator);\n    },\n    writable: true,\n    configurable: true,\n  },\n});\n\nfor (const key of ReflectOwnKeys(ArrayIteratorPrototype)) {\n  // next method has already defined\n  if (key === \"next\") {\n    continue;\n  }\n\n  // Copy ArrayIteratorPrototype descriptors to DummyArrayIteratorPrototype\n  ObjectDefineProperty(DummyArrayIteratorPrototype, key, ReflectGetOwnPropertyDescriptor(ArrayIteratorPrototype, key));\n}\n\n/**\n * Wrap the Generator around the dummy ArrayIterator\n * @type {<T>(generator: Generator<T>) => IterableIterator<T>}\n */\nexport function wrap(generator) {\n  const dummy = ObjectCreate(DummyArrayIteratorPrototype);\n  WeakMapPrototypeSet(generators, dummy, generator);\n  return dummy;\n}\n"],"mappings":"AAAA,SACEA,sBAAsB,EACtBC,0BAA0B,EAC1BC,4BAA4B,EAC5BC,sBAAsB,EACtBC,iBAAiB,EACjBC,kCAAkC,EAClCC,aAAa,EACbC,YAAY,EACZC,oBAAoB,EACpBC,+BAA+B,EAC/BC,cAAc,EACdC,cAAc,EACdC,mBAAmB,EACnBC,mBAAmB,QACd,mBAAmB;;AAE1B;AACA,MAAMC,cAAc,GAAG,IAAIR,aAAa,CAAC,CAAC;AAE1C,MAAMS,qBAAqB,GAAGR,YAAY,CAAC,IAAI,EAAE;EAC/CS,IAAI,EAAE;IACJC,KAAK,EAAE,SAASD,IAAIA,CAAA,EAAG;MACrB,MAAME,aAAa,GAAGN,mBAAmB,CAACE,cAAc,EAAE,IAAI,CAAC;MAC/D,OAAOb,0BAA0B,CAACiB,aAAa,CAAC;IAClD;EACF,CAAC;EAED,CAACP,cAAc,GAAG;IAChBM,KAAK,EAAE,SAASE,MAAMA,CAAA,EAAG;MACvB,OAAO,IAAI;IACb;EACF;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA,OAAO,SAASC,YAAYA,CAACC,KAAK,EAAE;EAClC,IACEA,KAAK,CAACV,cAAc,CAAC,KAAKN,kCAAkC,IAC5DL,sBAAsB,CAACgB,IAAI,KAAKf,0BAA0B,EAC1D;IACA,OAAOoB,KAAK;EACd;EAEA,MAAMC,IAAI,GAAGf,YAAY,CAACQ,qBAAqB,CAAC;EAChDF,mBAAmB,CAACC,cAAc,EAAEQ,IAAI,EAAEpB,4BAA4B,CAACmB,KAAK,CAAC,CAAC;EAC9E,OAAOC,IAAI;AACb;;AAEA;AACA,MAAMC,UAAU,GAAG,IAAIjB,aAAa,CAAC,CAAC;;AAEtC;AACA,MAAMkB,2BAA2B,GAAGjB,YAAY,CAACH,iBAAiB,EAAE;EAClEY,IAAI,EAAE;IACJC,KAAK,EAAE,SAASD,IAAIA,CAAA,EAAG;MACrB,MAAMS,SAAS,GAAGb,mBAAmB,CAACW,UAAU,EAAE,IAAI,CAAC;MACvD,OAAOpB,sBAAsB,CAACsB,SAAS,CAAC;IAC1C,CAAC;IACDC,QAAQ,EAAE,IAAI;IACdC,YAAY,EAAE;EAChB;AACF,CAAC,CAAC;AAEF,KAAK,MAAMC,GAAG,IAAIlB,cAAc,CAACV,sBAAsB,CAAC,EAAE;EACxD;EACA,IAAI4B,GAAG,KAAK,MAAM,EAAE;IAClB;EACF;;EAEA;EACApB,oBAAoB,CAACgB,2BAA2B,EAAEI,GAAG,EAAEnB,+BAA+B,CAACT,sBAAsB,EAAE4B,GAAG,CAAC,CAAC;AACtH;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASC,IAAIA,CAACJ,SAAS,EAAE;EAC9B,MAAMK,KAAK,GAAGvB,YAAY,CAACiB,2BAA2B,CAAC;EACvDX,mBAAmB,CAACU,UAAU,EAAEO,KAAK,EAAEL,SAAS,CAAC;EACjD,OAAOK,KAAK;AACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}